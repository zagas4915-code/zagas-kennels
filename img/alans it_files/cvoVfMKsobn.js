;/*FB_PKG_DELIM*/

__d("Hpke",["$InternalEnum","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=new Uint8Array([0]);a=new TextEncoder();var h=a.encode("psk_id_hash"),i=a.encode("info_hash"),j=a.encode("secret"),k=a.encode("key"),l=a.encode("base_nonce"),m=a.encode("exp"),n=a.encode("HPKE"),o=a.encode("sec");c=b("$InternalEnum")({KemX25519HkdfSha256Id:32});d=b("$InternalEnum")({KdfHkdfSha256Id:1});e=b("$InternalEnum")({AeadAes128GcmId:1,AeadChaCha20Poly1305Id:3});a=function(){function a(a,b,c){this.kem=a,this.kdf=b,this.aead=c}var c=a.prototype;c.setupBaseS=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.kem.encap(a));b=(yield this.keySchedule(a.sharedSecret,b));return{enc:a.enc,ctx:b}});function c(b,c){return a.apply(this,arguments)}return c}();c.setupBaseR=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield this.kem.decap(a,b));b=(yield this.keySchedule(a,c));return b});function c(b,c,d){return a.apply(this,arguments)}return c}();c.keySchedule=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=s(this.kem.kem_id,this.kdf.kdf_id,this.aead.aead_id),d=(yield this.kdf.labeledExtract(new Uint8Array(0),h,new Uint8Array(0),c));b=(yield this.kdf.labeledExtract(new Uint8Array(0),i,b,c));d=q(g,d,b);b=(yield this.kdf.labeledExtract(a,j,new Uint8Array(0),c));a=(yield this.kdf.labeledExpand(b,k,d,this.aead.nK,c));var e=(yield this.kdf.labeledExpand(b,l,d,this.aead.nN,c));b=(yield this.kdf.labeledExpand(b,m,d,this.kdf.nH,c));return new p(a,e,p.defaultSeq(this.aead.nN),b,this.aead,this.kdf,c)});function c(b,c){return a.apply(this,arguments)}return c}();c.sealSingleShot=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){a=(yield this.setupBaseS(a,b));b=(yield a.ctx.seal(c,d));return{ct:b,enc:a.enc}});function c(b,c,d,e){return a.apply(this,arguments)}return c}();c.openSingleShot=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){a=(yield this.setupBaseR(a,b,c));b=a.open(d,e);return b});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();return a}();var p=function(){function a(a,b,c,d,e,f,g){this.key=a,this.base_nonce=b,this.seq=c,this.exporter_secret=d,this.aead=e,this.kdf=f,this.suite_id=g}a.defaultSeq=function(a){return new Uint8Array(a).fill(0)};var c=a.prototype;c.seal=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.aead.seal(this.key,this.computeNonce(),a,b));this.incrementSeq();return a});function c(b,c){return a.apply(this,arguments)}return c}();c.open=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.aead.open(this.key,this.computeNonce(),a,b));this.incrementSeq();return a});function c(b,c){return a.apply(this,arguments)}return c}();c.computeNonce=function(){return t(this.base_nonce,this.seq)};c.incrementSeq=function(){var a=!1;for(var b=this.seq.byteLength-1;b>=0&&!a;b--)this.seq[b]!==255?(this.seq[b]+=1,a=!0):this.seq[b]=0};c.setSeq=function(a){this.seq=a};c["export"]=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.kdf.labeledExpand(this.exporter_secret,o,a,b,this.suite_id));return a});function c(b,c){return a.apply(this,arguments)}return c}();return a}();function q(){var a=0;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){return a+=b.byteLength});var e=new Uint8Array(a),f=0;c.forEach(function(a){e.set(a,f),f+=a.byteLength});return e}function r(a,b){var c=new Uint8Array(b);a=a;for(var d=0;d<b&&a;d++)c[b-(d+1)]=a%256,a>>=8;return c}function s(a,b,c){a=q(n,r(a,2),r(b,2),r(c,2));return a}function t(a,b){if(a.byteLength!==b.byteLength){var c=new Error("Xor: different length inputs");c.stack;throw c}c=new Uint8Array(a.byteLength);for(var d=0;d<a.byteLength;d++)c[d]=a[d]^b[d];return c}f.KemID=c;f.KdfID=d;f.AeadID=e;f.Hpke=a;f.HpkeCtx=p;f.concat=q;f.i2osp=r;f.hpkeSuiteId=s;f.xor=t}),66);
__d("AeadAes128Gcm",["Hpke","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=window.crypto||window.msCrypto;a=function(){function a(a){a===void 0&&(a=h.subtle),this.aead_id=d("Hpke").AeadID.AeadAes128GcmId,this.nK=16,this.nN=12,this.nT=16,this.internalCryptoProvider=null,this.internalCryptoProvider=a}var c=a.prototype;c.seal=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){a=(yield this.internalCryptoProvider.importKey("raw",a,{name:"AES-GCM"},!0,["encrypt"]));b={name:"AES-GCM",iv:b,additionalData:c};c=(yield this.internalCryptoProvider.encrypt(b,a,d));return new Uint8Array(c)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();c.open=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){a=(yield this.internalCryptoProvider.importKey("raw",a,{name:"AES-GCM"},!0,["decrypt"]));b={name:"AES-GCM",iv:b,additionalData:c};c=(yield this.internalCryptoProvider.decrypt(b,a,d));return new Uint8Array(c)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();return a}();g.AeadAes128Gcm=a}),98);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-int-1.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});function a(a,b){var c=a>>>16&65535;a=a&65535;var d=b>>>16&65535;b=b&65535;return a*b+(c*b+a*d<<16>>>0)|0}g.mul=Math.imul||a;function b(a,b){return a+b|0}g.add=b;function c(a,b){return a-b|0}g.sub=c;function d(a,b){return a<<b|a>>>32-b}g.rotl=d;function e(a,b){return a<<32-b|a>>>b}g.rotr=e;function f(a){return typeof a==="number"&&isFinite(a)&&Math.floor(a)===a}g.isInteger=Number.isInteger||f;g.MAX_SAFE_INTEGER=9007199254740991;g.isSafeInteger=function(a){return g.isInteger(a)&&a>=-g.MAX_SAFE_INTEGER&&a<=g.MAX_SAFE_INTEGER}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-binary-1.0.1",["stablelib-int-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-int-1.0.1")),h={},i={exports:h};function j(){Object.defineProperty(h,"__esModule",{value:!0});var a=g();function b(a,b){b===void 0&&(b=0);return(a[b+0]<<8|a[b+1])<<16>>16}h.readInt16BE=b;function c(a,b){b===void 0&&(b=0);return(a[b+0]<<8|a[b+1])>>>0}h.readUint16BE=c;function d(a,b){b===void 0&&(b=0);return(a[b+1]<<8|a[b])<<16>>16}h.readInt16LE=d;function e(a,b){b===void 0&&(b=0);return(a[b+1]<<8|a[b])>>>0}h.readUint16LE=e;function f(a,b,c){b===void 0&&(b=new Uint8Array(2));c===void 0&&(c=0);b[c+0]=a>>>8;b[c+1]=a>>>0;return b}h.writeUint16BE=f;h.writeInt16BE=f;function i(a,b,c){b===void 0&&(b=new Uint8Array(2));c===void 0&&(c=0);b[c+0]=a>>>0;b[c+1]=a>>>8;return b}h.writeUint16LE=i;h.writeInt16LE=i;function j(a,b){b===void 0&&(b=0);return a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]}h.readInt32BE=j;function k(a,b){b===void 0&&(b=0);return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}h.readUint32BE=k;function l(a,b){b===void 0&&(b=0);return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}h.readInt32LE=l;function m(a,b){b===void 0&&(b=0);return(a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b])>>>0}h.readUint32LE=m;function n(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);b[c+0]=a>>>24;b[c+1]=a>>>16;b[c+2]=a>>>8;b[c+3]=a>>>0;return b}h.writeUint32BE=n;h.writeInt32BE=n;function o(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);b[c+0]=a>>>0;b[c+1]=a>>>8;b[c+2]=a>>>16;b[c+3]=a>>>24;return b}h.writeUint32LE=o;h.writeInt32LE=o;function p(a,b){b===void 0&&(b=0);var c=j(a,b);a=j(a,b+4);return c*4294967296+a-(a>>31)*4294967296}h.readInt64BE=p;function q(a,b){b===void 0&&(b=0);var c=k(a,b);a=k(a,b+4);return c*4294967296+a}h.readUint64BE=q;function r(a,b){b===void 0&&(b=0);var c=l(a,b);a=l(a,b+4);return a*4294967296+c-(c>>31)*4294967296}h.readInt64LE=r;function s(a,b){b===void 0&&(b=0);var c=m(a,b);a=m(a,b+4);return a*4294967296+c}h.readUint64LE=s;function t(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);n(a/4294967296>>>0,b,c);n(a>>>0,b,c+4);return b}h.writeUint64BE=t;h.writeInt64BE=t;function u(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);o(a>>>0,b,c);o(a/4294967296>>>0,b,c+4);return b}h.writeUint64LE=u;h.writeInt64LE=u;function v(a,b,c){c===void 0&&(c=0);if(a%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(a/8>b.length-c)throw new Error("readUintBE: array is too short for the given bitLength");var d=0,e=1;for(a=a/8+c-1;a>=c;a--)d+=b[a]*e,e*=256;return d}h.readUintBE=v;function w(a,b,c){c===void 0&&(c=0);if(a%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(a/8>b.length-c)throw new Error("readUintLE: array is too short for the given bitLength");var d=0,e=1;for(var f=c;f<c+a/8;f++)d+=b[f]*e,e*=256;return d}h.readUintLE=w;function x(b,c,d,e){d===void 0&&(d=new Uint8Array(b/8));e===void 0&&(e=0);if(b%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!a.isSafeInteger(c))throw new Error("writeUintBE value must be an integer");var f=1;for(b=b/8+e-1;b>=e;b--)d[b]=c/f&255,f*=256;return d}h.writeUintBE=x;function y(b,c,d,e){d===void 0&&(d=new Uint8Array(b/8));e===void 0&&(e=0);if(b%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!a.isSafeInteger(c))throw new Error("writeUintLE value must be an integer");var f=1;for(var g=e;g<e+b/8;g++)d[g]=c/f&255,f*=256;return d}h.writeUintLE=y;function z(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat32(b)}h.readFloat32BE=z;function A(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat32(b,!0)}h.readFloat32LE=A;function B(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat64(b)}h.readFloat64BE=B;function C(a,b){b===void 0&&(b=0);a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getFloat64(b,!0)}h.readFloat64LE=C;function D(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat32(c,a);return b}h.writeFloat32BE=D;function E(a,b,c){b===void 0&&(b=new Uint8Array(4));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat32(c,a,!0);return b}h.writeFloat32LE=E;function F(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat64(c,a);return b}h.writeFloat64BE=F;function G(a,b,c){b===void 0&&(b=new Uint8Array(8));c===void 0&&(c=0);var d=new DataView(b.buffer,b.byteOffset,b.byteLength);d.setFloat64(c,a,!0);return b}h.writeFloat64LE=G}var k=!1;function l(){k||(k=!0,j());return i.exports}function c(a){switch(a){case void 0:return l()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-wipe-1.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});function a(a){for(var b=0;b<a.length;b++)a[b]=0;return a}g.wipe=a}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-chacha-1.0.1",["stablelib-binary-1.0.1","stablelib-wipe-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-binary-1.0.1")),h=a(b("stablelib-wipe-1.0.1")),i={},j={exports:i};function k(){Object.defineProperty(i,"__esModule",{value:!0});var a=g(),b=h(),c=20;function d(b,d,e){var f=1634760805,g=857760878,h=2036477234,i=1797285236,j=e[3]<<24|e[2]<<16|e[1]<<8|e[0],k=e[7]<<24|e[6]<<16|e[5]<<8|e[4],l=e[11]<<24|e[10]<<16|e[9]<<8|e[8],m=e[15]<<24|e[14]<<16|e[13]<<8|e[12],n=e[19]<<24|e[18]<<16|e[17]<<8|e[16],o=e[23]<<24|e[22]<<16|e[21]<<8|e[20],p=e[27]<<24|e[26]<<16|e[25]<<8|e[24];e=e[31]<<24|e[30]<<16|e[29]<<8|e[28];var q=d[3]<<24|d[2]<<16|d[1]<<8|d[0],r=d[7]<<24|d[6]<<16|d[5]<<8|d[4],s=d[11]<<24|d[10]<<16|d[9]<<8|d[8];d=d[15]<<24|d[14]<<16|d[13]<<8|d[12];var t=f,u=g,v=h,w=i,x=j,y=k,z=l,A=m,B=n,C=o,D=p,E=e,F=q,G=r,H=s,I=d;for(var J=0;J<c;J+=2)t=t+x|0,F^=t,F=F>>>32-16|F<<16,B=B+F|0,x^=B,x=x>>>32-12|x<<12,u=u+y|0,G^=u,G=G>>>32-16|G<<16,C=C+G|0,y^=C,y=y>>>32-12|y<<12,v=v+z|0,H^=v,H=H>>>32-16|H<<16,D=D+H|0,z^=D,z=z>>>32-12|z<<12,w=w+A|0,I^=w,I=I>>>32-16|I<<16,E=E+I|0,A^=E,A=A>>>32-12|A<<12,v=v+z|0,H^=v,H=H>>>32-8|H<<8,D=D+H|0,z^=D,z=z>>>32-7|z<<7,w=w+A|0,I^=w,I=I>>>32-8|I<<8,E=E+I|0,A^=E,A=A>>>32-7|A<<7,u=u+y|0,G^=u,G=G>>>32-8|G<<8,C=C+G|0,y^=C,y=y>>>32-7|y<<7,t=t+x|0,F^=t,F=F>>>32-8|F<<8,B=B+F|0,x^=B,x=x>>>32-7|x<<7,t=t+y|0,I^=t,I=I>>>32-16|I<<16,D=D+I|0,y^=D,y=y>>>32-12|y<<12,u=u+z|0,F^=u,F=F>>>32-16|F<<16,E=E+F|0,z^=E,z=z>>>32-12|z<<12,v=v+A|0,G^=v,G=G>>>32-16|G<<16,B=B+G|0,A^=B,A=A>>>32-12|A<<12,w=w+x|0,H^=w,H=H>>>32-16|H<<16,C=C+H|0,x^=C,x=x>>>32-12|x<<12,v=v+A|0,G^=v,G=G>>>32-8|G<<8,B=B+G|0,A^=B,A=A>>>32-7|A<<7,w=w+x|0,H^=w,H=H>>>32-8|H<<8,C=C+H|0,x^=C,x=x>>>32-7|x<<7,u=u+z|0,F^=u,F=F>>>32-8|F<<8,E=E+F|0,z^=E,z=z>>>32-7|z<<7,t=t+y|0,I^=t,I=I>>>32-8|I<<8,D=D+I|0,y^=D,y=y>>>32-7|y<<7;a.writeUint32LE(t+f|0,b,0);a.writeUint32LE(u+g|0,b,4);a.writeUint32LE(v+h|0,b,8);a.writeUint32LE(w+i|0,b,12);a.writeUint32LE(x+j|0,b,16);a.writeUint32LE(y+k|0,b,20);a.writeUint32LE(z+l|0,b,24);a.writeUint32LE(A+m|0,b,28);a.writeUint32LE(B+n|0,b,32);a.writeUint32LE(C+o|0,b,36);a.writeUint32LE(D+p|0,b,40);a.writeUint32LE(E+e|0,b,44);a.writeUint32LE(F+q|0,b,48);a.writeUint32LE(G+r|0,b,52);a.writeUint32LE(H+s|0,b,56);a.writeUint32LE(I+d|0,b,60)}function e(a,c,e,f,g){g===void 0&&(g=0);if(a.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(f.length<e.length)throw new Error("ChaCha: destination is shorter than source");var h,i;if(g===0){if(c.length!==8&&c.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");h=new Uint8Array(16);i=h.length-c.length;h.set(c,i)}else{if(c.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");h=c;i=g}c=new Uint8Array(64);for(var k=0;k<e.length;k+=64){d(c,h,a);for(var l=k;l<k+64&&l<e.length;l++)f[l]=e[l]^c[l-k];j(h,0,i)}b.wipe(c);g===0&&b.wipe(h);return f}i.streamXOR=e;function f(a,c,d,f){f===void 0&&(f=0);b.wipe(d);return e(a,c,d,d,f)}i.stream=f;function j(a,b,c){var d=1;while(c--)d=d+(a[b]&255)|0,a[b]=d&255,d>>>=8,b++;if(d>0)throw new Error("ChaCha: counter overflow")}}var l=!1;function m(){l||(l=!0,k());return j.exports}function c(a){switch(a){case void 0:return m()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-constant-time-1.0.1",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});function a(a,b,c){return~(a-1)&b|a-1&c}g.select=a;function b(a,b){return(a|0)-(b|0)-1>>>31&1}g.lessOrEqual=b;function c(a,b){if(a.length!==b.length)return 0;var c=0;for(var d=0;d<a.length;d++)c|=a[d]^b[d];return 1&c-1>>>8}g.compare=c;function d(a,b){return a.length===0||b.length===0?!1:c(a,b)!==0}g.equal=d}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-poly1305-1.0.1",["stablelib-constant-time-1.0.1","stablelib-wipe-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-constant-time-1.0.1")),h=a(b("stablelib-wipe-1.0.1")),i={},j={exports:i};function k(){Object.defineProperty(i,"__esModule",{value:!0});var a=g(),b=h();i.DIGEST_LENGTH=16;var c=function(){function a(a){this.digestLength=i.DIGEST_LENGTH;this._buffer=new Uint8Array(16);this._r=new Uint16Array(10);this._h=new Uint16Array(10);this._pad=new Uint16Array(8);this._leftover=0;this._fin=0;this._finished=!1;var b=a[0]|a[1]<<8;this._r[0]=b&8191;var c=a[2]|a[3]<<8;this._r[1]=(b>>>13|c<<3)&8191;b=a[4]|a[5]<<8;this._r[2]=(c>>>10|b<<6)&7939;c=a[6]|a[7]<<8;this._r[3]=(b>>>7|c<<9)&8191;b=a[8]|a[9]<<8;this._r[4]=(c>>>4|b<<12)&255;this._r[5]=b>>>1&8190;c=a[10]|a[11]<<8;this._r[6]=(b>>>14|c<<2)&8191;b=a[12]|a[13]<<8;this._r[7]=(c>>>11|b<<5)&8065;c=a[14]|a[15]<<8;this._r[8]=(b>>>8|c<<8)&8191;this._r[9]=c>>>5&127;this._pad[0]=a[16]|a[17]<<8;this._pad[1]=a[18]|a[19]<<8;this._pad[2]=a[20]|a[21]<<8;this._pad[3]=a[22]|a[23]<<8;this._pad[4]=a[24]|a[25]<<8;this._pad[5]=a[26]|a[27]<<8;this._pad[6]=a[28]|a[29]<<8;this._pad[7]=a[30]|a[31]<<8}a.prototype._blocks=function(a,b,c){var d=this._fin?0:1<<11,e=this._h[0],f=this._h[1],g=this._h[2],h=this._h[3],i=this._h[4],j=this._h[5],k=this._h[6],l=this._h[7],m=this._h[8],n=this._h[9],o=this._r[0],p=this._r[1],q=this._r[2],r=this._r[3],s=this._r[4],t=this._r[5],u=this._r[6],v=this._r[7],w=this._r[8],x=this._r[9];while(c>=16){var y=a[b+0]|a[b+1]<<8;e+=y&8191;var z=a[b+2]|a[b+3]<<8;f+=(y>>>13|z<<3)&8191;y=a[b+4]|a[b+5]<<8;g+=(z>>>10|y<<6)&8191;z=a[b+6]|a[b+7]<<8;h+=(y>>>7|z<<9)&8191;y=a[b+8]|a[b+9]<<8;i+=(z>>>4|y<<12)&8191;j+=y>>>1&8191;z=a[b+10]|a[b+11]<<8;k+=(y>>>14|z<<2)&8191;y=a[b+12]|a[b+13]<<8;l+=(z>>>11|y<<5)&8191;z=a[b+14]|a[b+15]<<8;m+=(y>>>8|z<<8)&8191;n+=z>>>5|d;y=0;z=y;z+=e*o;z+=f*(5*x);z+=g*(5*w);z+=h*(5*v);z+=i*(5*u);y=z>>>13;z&=8191;z+=j*(5*t);z+=k*(5*s);z+=l*(5*r);z+=m*(5*q);z+=n*(5*p);y+=z>>>13;z&=8191;var A=y;A+=e*p;A+=f*o;A+=g*(5*x);A+=h*(5*w);A+=i*(5*v);y=A>>>13;A&=8191;A+=j*(5*u);A+=k*(5*t);A+=l*(5*s);A+=m*(5*r);A+=n*(5*q);y+=A>>>13;A&=8191;var B=y;B+=e*q;B+=f*p;B+=g*o;B+=h*(5*x);B+=i*(5*w);y=B>>>13;B&=8191;B+=j*(5*v);B+=k*(5*u);B+=l*(5*t);B+=m*(5*s);B+=n*(5*r);y+=B>>>13;B&=8191;var C=y;C+=e*r;C+=f*q;C+=g*p;C+=h*o;C+=i*(5*x);y=C>>>13;C&=8191;C+=j*(5*w);C+=k*(5*v);C+=l*(5*u);C+=m*(5*t);C+=n*(5*s);y+=C>>>13;C&=8191;var D=y;D+=e*s;D+=f*r;D+=g*q;D+=h*p;D+=i*o;y=D>>>13;D&=8191;D+=j*(5*x);D+=k*(5*w);D+=l*(5*v);D+=m*(5*u);D+=n*(5*t);y+=D>>>13;D&=8191;var E=y;E+=e*t;E+=f*s;E+=g*r;E+=h*q;E+=i*p;y=E>>>13;E&=8191;E+=j*o;E+=k*(5*x);E+=l*(5*w);E+=m*(5*v);E+=n*(5*u);y+=E>>>13;E&=8191;var F=y;F+=e*u;F+=f*t;F+=g*s;F+=h*r;F+=i*q;y=F>>>13;F&=8191;F+=j*p;F+=k*o;F+=l*(5*x);F+=m*(5*w);F+=n*(5*v);y+=F>>>13;F&=8191;var G=y;G+=e*v;G+=f*u;G+=g*t;G+=h*s;G+=i*r;y=G>>>13;G&=8191;G+=j*q;G+=k*p;G+=l*o;G+=m*(5*x);G+=n*(5*w);y+=G>>>13;G&=8191;var H=y;H+=e*w;H+=f*v;H+=g*u;H+=h*t;H+=i*s;y=H>>>13;H&=8191;H+=j*r;H+=k*q;H+=l*p;H+=m*o;H+=n*(5*x);y+=H>>>13;H&=8191;var I=y;I+=e*x;I+=f*w;I+=g*v;I+=h*u;I+=i*t;y=I>>>13;I&=8191;I+=j*s;I+=k*r;I+=l*q;I+=m*p;I+=n*o;y+=I>>>13;I&=8191;y=(y<<2)+y|0;y=y+z|0;z=y&8191;y=y>>>13;A+=y;e=z;f=A;g=B;h=C;i=D;j=E;k=F;l=G;m=H;n=I;b+=16;c-=16}this._h[0]=e;this._h[1]=f;this._h[2]=g;this._h[3]=h;this._h[4]=i;this._h[5]=j;this._h[6]=k;this._h[7]=l;this._h[8]=m;this._h[9]=n};a.prototype.finish=function(a,b){b===void 0&&(b=0);var c=new Uint16Array(10),d,e;if(this._leftover){e=this._leftover;this._buffer[e++]=1;for(;e<16;e++)this._buffer[e]=0;this._fin=1;this._blocks(this._buffer,0,16)}d=this._h[1]>>>13;this._h[1]&=8191;for(e=2;e<10;e++)this._h[e]+=d,d=this._h[e]>>>13,this._h[e]&=8191;this._h[0]+=d*5;d=this._h[0]>>>13;this._h[0]&=8191;this._h[1]+=d;d=this._h[1]>>>13;this._h[1]&=8191;this._h[2]+=d;c[0]=this._h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this._h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this._h[e]=this._h[e]&d|c[e];this._h[0]=(this._h[0]|this._h[1]<<13)&65535;this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535;this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535;this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535;this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535;this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535;this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535;this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535;c=this._h[0]+this._pad[0];this._h[0]=c&65535;for(e=1;e<8;e++)c=(this._h[e]+this._pad[e]|0)+(c>>>16)|0,this._h[e]=c&65535;a[b+0]=this._h[0]>>>0;a[b+1]=this._h[0]>>>8;a[b+2]=this._h[1]>>>0;a[b+3]=this._h[1]>>>8;a[b+4]=this._h[2]>>>0;a[b+5]=this._h[2]>>>8;a[b+6]=this._h[3]>>>0;a[b+7]=this._h[3]>>>8;a[b+8]=this._h[4]>>>0;a[b+9]=this._h[4]>>>8;a[b+10]=this._h[5]>>>0;a[b+11]=this._h[5]>>>8;a[b+12]=this._h[6]>>>0;a[b+13]=this._h[6]>>>8;a[b+14]=this._h[7]>>>0;a[b+15]=this._h[7]>>>8;this._finished=!0;return this};a.prototype.update=function(a){var b=0,c=a.length,d;if(this._leftover){d=16-this._leftover;d>c&&(d=c);for(var e=0;e<d;e++)this._buffer[this._leftover+e]=a[b+e];c-=d;b+=d;this._leftover+=d;if(this._leftover<16)return this;this._blocks(this._buffer,0,16);this._leftover=0}c>=16&&(d=c-c%16,this._blocks(a,b,d),b+=d,c-=d);if(c){for(var e=0;e<c;e++)this._buffer[this._leftover+e]=a[b+e];this._leftover+=c}return this};a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);this.finish(a);return a};a.prototype.clean=function(){b.wipe(this._buffer);b.wipe(this._r);b.wipe(this._h);b.wipe(this._pad);this._leftover=0;this._fin=0;this._finished=!0;return this};return a}();i.Poly1305=c;function d(a,b){a=new c(a);a.update(b);b=a.digest();a.clean();return b}i.oneTimeAuth=d;function e(b,c){return b.length!==i.DIGEST_LENGTH||c.length!==i.DIGEST_LENGTH?!1:a.equal(b,c)}i.equal=e}var l=!1;function m(){l||(l=!0,k());return j.exports}function c(a){switch(a){case void 0:return m()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("stablelib-chacha20poly1305-1.0.1",["stablelib-chacha-1.0.1","stablelib-poly1305-1.0.1","stablelib-wipe-1.0.1","stablelib-binary-1.0.1","stablelib-constant-time-1.0.1"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("stablelib-chacha-1.0.1")),h=a(b("stablelib-poly1305-1.0.1")),i=a(b("stablelib-wipe-1.0.1")),j=a(b("stablelib-binary-1.0.1")),k=a(b("stablelib-constant-time-1.0.1")),l={},m={exports:l};function n(){Object.defineProperty(l,"__esModule",{value:!0});var a=g(),b=h(),c=i(),d=j(),e=k();l.KEY_LENGTH=32;l.NONCE_LENGTH=12;l.TAG_LENGTH=16;var f=new Uint8Array(16),m=function(){function g(a){this.nonceLength=l.NONCE_LENGTH;this.tagLength=l.TAG_LENGTH;if(a.length!==l.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(a)}g.prototype.seal=function(b,d,e,f){if(b.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var g=new Uint8Array(16);g.set(b,g.length-b.length);b=new Uint8Array(32);a.stream(this._key,g,b,4);var h=d.length+this.tagLength;if(f){if(f.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");f=f}else f=new Uint8Array(h);a.streamXOR(this._key,g,d,f,4);this._authenticate(f.subarray(f.length-this.tagLength,f.length),b,f.subarray(0,f.length-this.tagLength),e);c.wipe(g);return f};g.prototype.open=function(b,d,f,g){if(b.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var h=new Uint8Array(16);h.set(b,h.length-b.length);b=new Uint8Array(32);a.stream(this._key,h,b,4);var i=new Uint8Array(this.tagLength);this._authenticate(i,b,d.subarray(0,d.length-this.tagLength),f);if(!e.equal(i,d.subarray(d.length-this.tagLength,d.length)))return null;b=d.length-this.tagLength;if(g){if(g.length!==b)throw new Error("ChaCha20Poly1305: incorrect destination length");f=g}else f=new Uint8Array(b);a.streamXOR(this._key,h,d.subarray(0,d.length-this.tagLength),f,4);c.wipe(h);return f};g.prototype.clean=function(){c.wipe(this._key);return this};g.prototype._authenticate=function(a,e,g,h){e=new b.Poly1305(e);h&&(e.update(h),h.length%16>0&&e.update(f.subarray(h.length%16)));e.update(g);g.length%16>0&&e.update(f.subarray(g.length%16));var i=new Uint8Array(8);h&&d.writeUint64LE(h.length,i);e.update(i);d.writeUint64LE(g.length,i);e.update(i);h=e.digest();for(g=0;g<h.length;g++)a[g]=h[g];e.clean();c.wipe(h);c.wipe(i)};return g}();l.ChaCha20Poly1305=m}var o=!1;function p(){o||(o=!0,n());return m.exports}function c(a){switch(a){case void 0:return p()}}e.exports=c}),null);
__d("AeadChaPoly",["Hpke","stablelib-chacha20poly1305-1.0.1"],(function(a,b,c,d,e,f,g){"use strict";var h=c("stablelib-chacha20poly1305-1.0.1")();a=function(){function a(){this.aead_id=d("Hpke").AeadID.AeadChaCha20Poly1305Id,this.nK=32,this.nN=12,this.nT=16}var b=a.prototype;b.seal=function(a,b,c,d){a=new h.ChaCha20Poly1305(a);a=a.seal(b,d,c);return a};b.open=function(a,b,c,d){a=new h.ChaCha20Poly1305(a);a=a.open(b,d,c);return a};return a}();g.AeadChaPoly=a}),98);
__d("VideoPlayerAudioAvailabilityInfo",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.audioAvailability;a=a.mutedSegmentsUnsanitized;a=a.map(function(a){return a.muteStartTimeInSec!=null&&a.muteEndTimeInSec!=null&&a.muteEndTimeInSec>a.muteStartTimeInSec?{muteEndTimeInSec:a.muteEndTimeInSec,muteStartTimeInSec:a.muteStartTimeInSec}:null}).filter(Boolean);return{audioAvailability:b,mutedSegments:a}}function b(a,b){var d=a.audioAvailability;a=a.mutedSegments;var e=b.playheadPosition,f;b=!1;var g=!1;switch(d){case"AVAILABLE_BUT_MUTED":a.length>0?(b=e!=null&&a.some(function(a){return a.muteStartTimeInSec<=e&&e<=a.muteEndTimeInSec}),b?(f="VOLUME_COPYRIGHT_PARTIAL_SILENCED",g=!0):f="VOLUME_COPYRIGHT_PARTIAL_NOT_SILENCED"):(f="VOLUME_COPYRIGHT_FULL",g=!0);break;case"AVAILABLE_BUT_SILENT":case"UNAVAILABLE":f="VOLUME_SILENT";g=!0;break;case"AVAILABLE":case"UNKNOWN":case"AVAILABLE_BUT_MISSING_LOUDNESS_DATA":case null:case void 0:f="VOLUME_DEFAULT";break;default:c("FBLogger")("comet_video_player").mustfix("Unhandled audio availability: %s",d);f="VOLUME_DEFAULT";break}return{isPlayheadWithinMutedSegment:b,isSilentAtPlayhead:g,volumeControlState:f}}d=a({audioAvailability:null,mutedSegmentsUnsanitized:[]});g.makeVideoPlayerAudioAvailabilityInfo=a;g.makeVideoPlayerAudioAvailabilityAtPlayheadInfo=b;g.VideoPlayerAudioAvailabilityInfoDefault=d}),98);
__d("normalizeVideoPlayerLoopCount",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){b===void 0&&(b=null);d===void 0&&(d=null);var e;if(a==null){d=(b!=null?b:!1)?d!=null?d:0:0;d===-1?e=-1:d<0||!Number.isFinite(d)||Math.floor(d)!==d?e=0:d===0&&b===!0?e=-1:e=d}else if(a===-1||a===Number.POSITIVE_INFINITY)e=-1;else if(a<0||!Number.isFinite(a)||Math.floor(a)!==a)throw c("FBLogger")("comet_video_player").mustfixThrow("Invalid loopingCount: %s",a);else e=a;return e}g["default"]=a}),98);
__d("CoreVideoPlayerMetaData",["VideoPlayerAudioAvailabilityInfo","normalizeVideoPlayerLoopCount"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!=null&&isFinite(a)&&a>0?a:0}var i=[];function a(a){var b,e=a.sideLoadCaptionsExpected===!0||a.sideLoadCaptionsUrl!=null,f=a.isLiveStreaming===!0;return babelHelpers["extends"]({},a,{audioAvailabilityInfo:(b=a.audioAvailabilityInfo)!=null?b:d("VideoPlayerAudioAvailabilityInfo").VideoPlayerAudioAvailabilityInfoDefault,autoplayGatingResult:a.autoplayGatingResult!=null?a.autoplayGatingResult:"unknown",canAutoplay:a.canAutoplay!=null?a.canAutoplay:"allow",desiredLatencyMs:(b=a.desiredLatencyMs)!=null?b:0,inbandCaptionsExpected:f,initialRepresentationIds:(b=a.initialRepresentationIds)!=null?b:i,isNCSR:Boolean(a.isNCSR),isPremiumMusicVideo:Boolean(a.isPremiumMusicVideo),latencyToleranceMs:(f=a.latencyToleranceMs)!=null?f:0,loopCount:c("normalizeVideoPlayerLoopCount")(a.loopCount),sideLoadCaptionsExpected:e,startTimestamp:h(a.startTimestamp)})}g.applyDefaultsToCoreVideoPlayerMetaData=a}),98);
__d("QuicIntCodec",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=63,i=255,j=64,k=128,l=192,m=64,n=16384,o=1073741824,p=2147483647;function q(a){if(a<m)return 1;if(a<n)return 2;if(a<o)return 4;if(a>p)throw c("FBLogger")("quic_codec").mustfixThrow("Number too large to encode");return 8}function r(a,b){var d=a[b],e=d>>6;e=1<<e;d&=h;if(e===8&&(d>0||a[b+1]>0||a[b+2]>0||a[b+3]>0))throw c("FBLogger")("quic_codec").mustfixThrow("Number is too large to decode");for(var f=1;f<e;f++)d=d<<8|a[b+f];return[d,b+e]}function s(a,b,c){a=a;var d=q(a);for(var e=d-1;e>0;e--)b[c+e]=a&i,a>>=8;e=d===8?l:d===4?k:d===2?j:0;b[c]=e|a&h;return c+d}function a(a){a=r(a,0);var b=a[0];a[1];return b}function b(a){var b=q(a);b=new Uint8Array(b);s(a,b,0);return b}g.getByteLength=q;g.decodeQuicIntWithExistingBuffer=r;g.encodeWithExistingBuffer=s;g.decode=a;g.encode=b}),98);
__d("HttpRequestBinaryEncode",["QuicIntCodec","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=new URL(a.url);return{host:a.host,path:a.pathname+a.search,scheme:a.protocol.replace(":","")}}function i(a,b){var c,e=0,f=[],g=b.encode(a.method),i=g.byteLength;e+=(c=d("QuicIntCodec")).getByteLength(i)+i;f.push(g);i=h(a);g=i.host;a=i.path;i=i.scheme;i=b.encode(i);var j=i.byteLength;e+=c.getByteLength(j)+j;f.push(i);j=b.encode(g);i=j.byteLength;e+=c.getByteLength(i)+i;f.push(j);g=b.encode(a);i=g.byteLength;e+=c.getByteLength(i)+i;f.push(g);return{length:e,steps:f}}function j(a,b,c){var e=0,f=[],g=new Map(a.headers);c&&!g.has("Host")&&g.set("Host",new URL(a.url).host);for(c of g){a=c[0];g=c[1];a=b.encode(a);var h=a.byteLength;e+=d("QuicIntCodec").getByteLength(h)+h;f.push(a);h=b.encode(g);a=h.byteLength;e+=d("QuicIntCodec").getByteLength(h.byteLength)+a;f.push(h)}return{length:e,steps:[e].concat(f)}}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=new TextEncoder(),e=0,f=[];f.push(0);e++;var g=i(a,c),h=g.length;g=g.steps;e+=h;f.push.apply(f,g);h=j(a,c,b);g=h.length;c=h.steps;e+=d("QuicIntCodec").getByteLength(g)+g;f.push.apply(f,c);b=new Uint8Array(yield a.arrayBuffer());h=b.byteLength;e+=d("QuicIntCodec").getByteLength(h)+h;f.push(b);f.push(0);e++;return{length:e,steps:f}});return l.apply(this,arguments)}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);a=(yield k(a,b));b=a.length;a=a.steps;b=new Uint8Array(b);var c=0;for(a of a)typeof a==="number"?c=d("QuicIntCodec").encodeWithExistingBuffer(a,b,c):(c=d("QuicIntCodec").encodeWithExistingBuffer(a.length,b,c),b.set(a,c),c+=a.length);return b});return m.apply(this,arguments)}g.binaryEncodeRequest=a}),98);
__d("HttpResponseBinaryDecode",["FBLogger","QuicIntCodec"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){e=e;var f=new Headers(),g=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,e),h=g[0];g=g[1];h=g+h;e=g;while(e<h){g=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,e);var i=g[0];g=g[1];var j=b.decode(a.slice(g,g+i));e=g+i;g=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,e);i=g[0];g=g[1];var k=b.decode(a.slice(g,g+i));e=g+i;f.append(j,k)}if(h!==e)throw c("FBLogger")("http_binary").mustfixThrow("Decode response with header length mismatch");return{headers:f,offset:e}}function a(a){var b=a[0];if(b!==1)throw c("FBLogger")("http_binary").mustfixThrow("Framing indicator must be 1, but got %s instead",b);b=1;var e=new TextDecoder(),f=d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,b),g=f[0];f=f[1];b=f;f=b>=a.byteLength?{offset:b,headers:new Headers()}:h(a,e,b);b=f.offset;e=b>=a.byteLength?[0,b]:d("QuicIntCodec").decodeQuicIntWithExistingBuffer(a,b);var i=e[0];e=e[1];b=e;e=i<1?void 0:a.slice(b,b+i);return new Response(e,{headers:f.headers,status:g})}g.binaryDecodeResponse=a}),98);
__d("HttpXHRRequestBinaryEncode",["QuicIntCodec","fbjs/lib/invariant"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=new URL(a.getURI().toString());return{host:a.host,path:a.pathname+a.search,scheme:a.protocol.replace(":","")}}function i(a,b){var c,e=0,f=[],g=b.encode(a.getMethod()),i=g.byteLength;e+=(c=d("QuicIntCodec")).getByteLength(i)+i;f.push(g);i=h(a);g=i.host;a=i.path;i=i.scheme;i=b.encode(i);var j=i.byteLength;e+=c.getByteLength(j)+j;f.push(i);j=b.encode(g);i=j.byteLength;e+=c.getByteLength(i)+i;f.push(j);g=b.encode(a);i=g.byteLength;e+=c.getByteLength(i)+i;f.push(g);return{length:e,steps:f}}function j(a,b,e){var f=0,g=[],h=a.getAllRequestHeaders();h!=null||c("fbjs/lib/invariant")(0,87335);h=new Map(Object.entries(h));e&&!h.has("Host")&&h.set("Host",new URL(a.getURI().toString()).host);for(e of h){a=e[0];h=e[1];a=b.encode(a);var i=a.byteLength;f+=d("QuicIntCodec").getByteLength(i)+i;g.push(a);i=b.encode(h);a=i.byteLength;f+=d("QuicIntCodec").getByteLength(i.byteLength)+a;g.push(i)}return{length:f,steps:[f].concat(g)}}function k(a,b){var e=new TextEncoder(),f=0,g=[];g.push(0);f++;var h=i(a,e),k=h.length;h=h.steps;f+=k;g.push.apply(g,h);k=j(a,e,b);h=k.length;b=k.steps;f+=d("QuicIntCodec").getByteLength(h)+h;g.push.apply(g,b);k=a.getData();k!=null||c("fbjs/lib/invariant")(0,21489);h=e.encode(k);b=h.byteLength;f+=d("QuicIntCodec").getByteLength(b)+b;g.push(h);g.push(0);f++;return{length:f,steps:g}}function a(a,b){b===void 0&&(b=!1);a=k(a,b);b=a.length;a=a.steps;b=new Uint8Array(b);var c=0;for(a of a)typeof a==="number"?c=d("QuicIntCodec").encodeWithExistingBuffer(a,b,c):(c=d("QuicIntCodec").encodeWithExistingBuffer(a.length,b,c),b.set(a,c),c+=a.length);return b}g.binaryEncodeRelayAPIRequest=a}),98);
__d("KdfHkdfSha256",["Hpke","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=window.crypto||window.msCrypto;a=new TextEncoder();var i=a.encode("HPKE-v1");c=function(){function a(a){a===void 0&&(a=h.subtle),this.kdf_id=d("Hpke").KdfID.KdfHkdfSha256Id,this.nH=32,this.internalCryptoProvider=null,this.internalCryptoProvider=a}var c=a.prototype;c.hmac=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.internalCryptoProvider.importKey("raw",a.byteLength===0?new Uint8Array(32):a,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]));a=(yield this.internalCryptoProvider.sign("HMAC",a,b));return new Uint8Array(a)});function c(b,c){return a.apply(this,arguments)}return c}();c.extract=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.hmac(a,b));return a});function c(b,c){return a.apply(this,arguments)}return c}();c.expand=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=new Uint8Array(c),e=new Uint8Array(0);b=new Uint8Array(b);var f=new Uint8Array(1);if(c>255*32){c=new Error("KDF expand: entropy limit reached");c.stack;throw c}c=new Uint8Array(32+b.length+1);for(var g=1,h=0;h<d.length;g++)f[0]=g,c.set(e,0),c.set(b,e.length),c.set(f,e.length+b.length),e=(yield this.hmac(a,c.slice(0,e.length+b.length+1))),d.length-h>=e.length?(d.set(e,h),h+=e.length):(d.set(e.slice(0,d.length-h),h),h+=d.length-h);return d});function c(b,c,d){return a.apply(this,arguments)}return c}();c.labeledExtract=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e=d("Hpke").concat(i,e,b,c);b=(yield this.extract(a,e));return b});function c(b,c,d,e){return a.apply(this,arguments)}return c}();c.labeledExpand=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){f=d("Hpke").concat(new Uint8Array([0,e]),i,f,b,c);return yield this.expand(a,f,e)});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();return a}();g.KdfHkdfSha256=c}),98);
__d("x25519FromNacl",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},h=new Uint8Array(32);h[0]=9;g();g([1]);var i=g([56129,1]);g([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]);a=g([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]);g([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]);g([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);g([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function j(a){var b,c;for(c=0;c<16;c++)a[c]+=65536,b=Math.floor(a[c]/65536),a[(c+1)*(c<15?1:0)]+=b-1+37*(b-1)*(c===15?1:0),a[c]-=b*65536}function k(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function l(a,b){var c,d,e=g(),f=g();for(c=0;c<16;c++)f[c]=b[c];j(f);j(f);j(f);for(b=0;b<2;b++){e[0]=f[0]-65517;for(c=1;c<15;c++)e[c]=f[c]-65535-(e[c-1]>>16&1),e[c-1]&=65535;e[15]=f[15]-32767-(e[14]>>16&1);d=e[15]>>16&1;e[14]&=65535;k(f,e,1-d)}for(c=0;c<16;c++)a[2*c]=f[c]&255,a[2*c+1]=f[c]>>8}function m(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function n(a,b,c){var d;for(d=0;d<16;d++)a[d]=b[d]+c[d]|0}function o(a,b,c){var d;for(d=0;d<16;d++)a[d]=b[d]-c[d]|0}function p(a,b,c){var d,e,f=new Float64Array(31);for(d=0;d<31;d++)f[d]=0;for(d=0;d<16;d++)for(e=0;e<16;e++)f[d+e]+=b[d]*c[e];for(d=0;d<15;d++)f[d]+=38*f[d+16];for(d=0;d<16;d++)a[d]=f[d];j(a);j(a)}function q(a,b){p(a,b,b)}function r(a,b){var c=g(),d;for(d=0;d<16;d++)c[d]=b[d];for(d=253;d>=0;d--)q(c,c),d!==2&&d!==4&&p(c,c,b);for(d=0;d<16;d++)a[d]=c[d]}function s(a,b,c){var d=new Uint8Array(32),e=new Float64Array(80),f,h=g(),j=g(),s=g(),t=g(),u=g(),v=g();for(f=0;f<31;f++)d[f]=b[f];d[31]=b[31]&127|64;d[0]&=248;m(e,c);for(f=0;f<16;f++)j[f]=e[f],t[f]=h[f]=s[f]=0;h[0]=t[0]=1;for(f=254;f>=0;--f)b=d[f>>>3]>>>(f&7)&1,k(h,j,b),k(s,t,b),n(u,h,s),o(h,h,s),n(s,j,t),o(j,j,t),q(t,u),q(v,h),p(h,s,h),p(s,j,u),n(u,h,s),o(h,h,s),q(j,h),o(s,t,v),p(h,s,i),n(h,h,t),p(s,s,h),p(h,t,v),p(t,j,e),q(j,u),k(h,j,b),k(s,t,b);for(f=0;f<16;f++)e[f+16]=h[f],e[f+32]=s[f],e[f+48]=j[f],e[f+64]=t[f];c=e.subarray(32);b=e.subarray(16);r(c,c);p(b,b,c);l(a,b);return 0}function t(a,b){return s(a,b,h)}function u(a,b,c){c(b,32);return t(a,b)}var v=32,w=32,x=32,y=32;function z(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function A(a){for(var b=0;b<a.length;b++)a[b]=0}b=function(){function a(){this.randombytesFn=function(){throw new Error("no CSPRNG")};var a=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(a&&a.getRandomValues){var b=65536;this.randombytesFn=function(c,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=b)a.getRandomValues(f.subarray(e,e+Math.min(d-e,b)));for(e=0;e<d;e++)c[e]=f[e];A(f)}}else a&&a.randomBytes&&(this.randombytesFn=function(b,c){var d,e=a.randomBytes(c);for(d=0;d<c;d++)b[d]=e[d];A(e)})}var b=a.prototype;b.scalarMult=function(a,b){z(a,b);if(a.length!==w)throw new Error("bad n size");if(b.length!==v)throw new Error("bad p size");var c=new Uint8Array(v);s(c,a,b);return c};b.scalarMultBase=function(a){z(a);if(a.length!==w)throw new Error("bad n size");var b=new Uint8Array(v);t(b,a);return b};b.boxKeyPair=function(){var a=new Uint8Array(x),b=new Uint8Array(y);u(a,b,this.randombytesFn);return{publicKey:a,secretKey:b}};b.boxKeyPairFromSecretKey=function(a){z(a);if(a.length!==y)throw new Error("bad secret key size");var b=new Uint8Array(x);t(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};b.setPRNG=function(a){this.randombytesFn=a};return a}();f["default"]=b}),66);
__d("KemX25519HkdfSha256",["Hpke","KdfHkdfSha256","asyncToGeneratorRuntime","x25519FromNacl"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("x25519FromNacl"))();a=new TextEncoder();var i=a.encode("eae_prk"),j=a.encode("shared_secret"),k=a.encode("KEM");e=function(){function a(a){a===void 0&&(a=new(d("KdfHkdfSha256").KdfHkdfSha256)()),this.kem_id=d("Hpke").KemID.KemX25519HkdfSha256Id,this.nSecret=32,this.nEnc=32,this.kdf=a}var c=a.prototype;c.createKeyPair=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield h.boxKeyPair());return{pk:a.publicKey,sk:a.secretKey}});function c(){return a.apply(this,arguments)}return c}();c.pk=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h.boxKeyPairFromSecretKey(a));return a.publicKey});function c(b){return a.apply(this,arguments)}return c}();c.encap=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield this.createKeyPair()),c=h.scalarMult(b.sk,a);a=d("Hpke").concat(b.pk,a);var e=d("Hpke").concat(k,d("Hpke").i2osp(this.kem_id,2));c=(yield this.kdf.labeledExtract(new Uint8Array(0),i,c,e));c=(yield this.kdf.labeledExpand(c,j,a,this.nSecret,e));return{sharedSecret:c,enc:b.pk}});function c(b){return a.apply(this,arguments)}return c}();c.decap=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=h.scalarMult(b,a);b=h.scalarMultBase(b);a=d("Hpke").concat(a,b);b=d("Hpke").concat(k,d("Hpke").i2osp(this.kem_id,2));c=(yield this.kdf.labeledExtract(new Uint8Array(0),i,c,b));c=(yield this.kdf.labeledExpand(c,j,a,this.nSecret,b));return c});function c(b,c){return a.apply(this,arguments)}return c}();return a}();g.KemX25519HkdfSha256=e}),98);
__d("MediaPlaybackTagMetadataHighFrequencyCategory",[],(function(a,b,c,d,e,f){a=Object.freeze({FB_BANDWIDTH:"fb_bandwidth",VIDEO_BANDWIDTH:"video_bandwidth",TOTAL_FRAME_COUNT:"total_frame_count",DROPPED_FRAME_COUNT:"dropped_frame_count",LARGE_DROPPED_FRAME_COUNT:"large_dropped_frame_count",VERY_LARGE_DROPPED_FRAME_COUNT:"very_large_dropped_frame_count",TASOS_VIDEO_TRANSPORT_BWE_BITS_PER_SEC:"tasos_video_transport_bwe_bits_per_sec",LIVE_LATENCY_FRAMES:"live_latency_frames",DROPPED_FRAME_BUCKETIZED:"dropped_frame_bucketized"});f["default"]=a}),66);
__d("hashString",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return b}f["default"]=a}),66);
__d("MediaPlaybackCompoundEventStateMachineLogger",["MediaPlaybackTagMetadataHighFrequencyCategory","NetworkStatus","SiteData","emptyFunction","gkx","hashString","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4,i=1e3,j=Object.freeze(["paused","completed","cancelled","error","heartbeat"]),k=b=c("emptyFunction"),l=b,m=b,n=b,o=!1;c("gkx")("494")&&(o=!0,k=function(a,b){try{var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];(c=window.console).info.apply(c,["["+a+"][SNAPL]"+b].concat(e))}catch(a){}},l=function(a,b,c,d){k(a,"[handleMetaData]",{loggingMetaData:c,loggingMetaDataPrevious:b,trackedChanges:d})},m=function(a,b,c,d){k(a,"[handleStateMachine]",{prevState:b,state:c,action:d})},n=function(a,b){k(a,"[setAdditionalLogData(SNAPL)]",{values:b})});function p(){return{bufferingSequenceStartClockTimestamp:null,canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,errorRecoveryAttemptState:{eventsLogged:0},hasLoggedStartedPlaying:!1,hasPendingRequestedPlaying:!1,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedTagMetadata:{},nextHeartbeatTime:null,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,warningState:{eventsLoggedPerKey:new Map(),eventsLoggedTotal:0,eventsMaxLoggedPerKey:function(){try{return Math.max(0,c("justknobx")._("1831")||0)}catch(a){return 0}}(),eventsMaxLoggedTotal:function(){try{return Math.max(0,c("justknobx")._("1832")||0)}catch(a){return 0}}()}}}function a(a){var b={},d=a.initialLoggingMetaData,e=a.initialCoreVideoPlayerMetaData;d;var f=[],g=p(),q=[],r={};function s(b){var c,h=b.events;b=b.state;var i=babelHelpers["extends"]({},e.loggingToSNAPLAdditionalData,r);i=(c=(c=a.metadataProvider)==null?void 0:c.getRequiredMetadata({coreVideoPlayerMetaData:e,logDataAdditions:i,loggingMetaData:d,state:b}))!=null?c:{current_watching_module:"",media_id:"",tracking_type:"none"};b={events:h,required_metadata:i};f.push(b);o&&k(a.debugLogId,"[_push] "+b.events.map(function(a){return a.event_name}).join(","),{loggedEvent:b,loggerEventsLength:f.length,loggingState:JSON.stringify(g)})}function t(c){var d=c.event;c=c.state;q.push(d);o&&k(a.debugLogId,"[_addEvent] "+d.event_name,{event:d,eventsListLength:q.length,loggingState:JSON.stringify(g)});if(j.includes(d.event_name)){d=[].concat(q);q=[];s({events:d,state:c})}return b}function u(){return g.hasLoggedStartedPlaying?"unpaused":"started"}function v(a,b){var e=a.uncontrolledState.videoElementDuration;return{client_time_ms:c("gkx")("18028")?Math.floor(a.uncontrolledState.clockTimestamp).toString():Math.round(a.uncontrolledState.clockTimestamp).toString(),event_name:b,media_time_ms:a.uncontrolledState.videoElementPlayheadPosition!=null?Math.round(a.uncontrolledState.videoElementPlayheadPosition*1e3).toString():"0",player_instance_id:Math.abs(c("hashString")(d.instanceKey)).toString(),player_instance_key:d.instanceKey,video_client_duration:e!=null?Math.trunc(e*1e3).toString():void 0}}function w(b){d;if(b.type==="notify_logging_metadata_change"){b=b.payload;var c=b.coreVideoPlayerMetaData;b=b.loggingMetaData;if(o){var f=c.initialTracePolicy!==e.initialTracePolicy;l(a.debugLogId,d,b,{initialTracePolicyChanged:f})}d=b;e=c}}function x(a,c,d){if(a.controlledState.playbackState!==c.controlledState.playbackState&&c.controlledState.playbackState==="ended"&&g.canLogPausedOrFinishedPlaying){z(c);d=v(c,"completed");t({event:d,state:c});g.canLogPausedOrFinishedPlaying=!1;return b}else return b}function y(a,c){var d=v(a,"requested_playing");c=c!=null?babelHelpers["extends"]({},d,{media_time_ms:Math.round(c*1e3).toString(),start_state:u()}):babelHelpers["extends"]({},d,{start_state:u()});t({event:c,state:a});g.hasPendingRequestedPlaying=!0;g.canLogPausedOrFinishedPlaying=!0;return b}function z(c,f){var g,h=babelHelpers["extends"]({},e.loggingToSNAPLAdditionalData,r);g=(g=a.metadataProvider)==null?void 0:g.getTagMetadata({coreVideoPlayerMetaData:e,logDataAdditions:h,loggingMetaData:d,state:c});if(Object.keys(g!=null?g:{}).length>0){f&&(g=babelHelpers["extends"]({},g,f));h=babelHelpers["extends"]({},v(c,"tags_changed"),{tag_metadata:g});t({event:h,state:c})}return b}function A(a){if(!g.canLogPausedOrFinishedPlaying)return b;else if(g.hasPendingRequestedPlaying){z(a);B(a);g.canLogPausedOrFinishedPlaying=!1;g.hasPendingRequestedPlaying=!1;return b}else{z(a);var c=v(a,"paused");t({event:c,state:a});g.canLogPausedOrFinishedPlaying=!1;g.hasPendingRequestedPlaying=!1;return b}}function B(a){var c=v(a,"cancelled");t({event:c,state:a});return b}function C(a,c,d){if(d.type==="dom_event_play_promise_rejected"&&g.hasPendingRequestedPlaying){a=d.payload.playPromiseRejectionReason;if(a!=null&&a.name==="NotAllowedError"){B(c);return b}else return b}else return b}function D(a,c,d){if((d.type==="controller_play_requested"||d.type==="dom_event_play"&&!g.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==c.controlledState.playbackState){y(c);return b}else return b}function E(a){var c=v(a,"requested_seek");t({event:c,state:a});return b}function F(a,c,d){var e=c.controlledState.playbackState,f=a.controlledState.playbackState;if(d.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){A(c);E(c);g.isLoggingScrubbingSequence=!0;return b}else if(!a.controlledState.seeking&&c.controlledState.seeking&&!g.isLoggingScrubbingSequence&&e!=="paused"&&e!=="ended"&&!g.hasPendingRequestedPlaying){A(c);E(c);g.shouldLogRequestedPlayingForScrub=!0;return b}else if(d.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&e!=="paused"&&e!=="ended"){y(c,d.payload.seekTargetPosition);return b}else if(a.controlledState.seeking&&!c.controlledState.seeking){g.shouldLogRequestedPlayingForScrub&&e!=="paused"&&e!=="ended"&&y(c);g.isLoggingScrubbingSequence=!1;g.shouldLogRequestedPlayingForScrub=!1;f!=="paused"&&f!=="ended"&&(g.canLogPlayingEvent=!0);return b}else return b}function G(a,d,e){if(a.controlledState.playbackState==="stalling"&&d.controlledState.playbackState==="playing"&&g.canLogPlayingEvent){e=babelHelpers["extends"]({},v(d,"started_playing"),{start_state:u()});t({event:e,state:d});g.canLogPlayingEvent=!1;g.hasPendingRequestedPlaying=!1;g.hasLoggedStartedPlaying=!0;z(d,{web_client_revision:String(c("SiteData").client_revision)});return b}else return b}function H(a,c,d){if((d.type==="controller_pause_requested"||d.type==="dom_event_pause"&&!g.shouldIgnoreDomPause)&&a.controlledState.playbackState!==c.controlledState.playbackState){A(c);return b}else return b}function I(a,c,d){var e=c.controlledState.playbackState;if(e!=="paused"&&e!=="ended"){d.type==="implementation_video_node_unmounted"?A(a):(d.type==="implementation_unmounted"||d.type==="implementation_engine_destroy_requested")&&A(c);return b}else return b}function J(c,f,h){c=f.controlledState.error;if(c!=null&&c!==g.lastLoggedError&&c.errorCode!=="410"){var i;z(f);i=babelHelpers["extends"]({},(i=a.metadataProvider)==null?void 0:i.getErrorMetadata({action:h,coreVideoPlayerMetaData:e,loggingMetaData:d,state:f,videoPlayerError:c}),{name:"failed_playing"});h=babelHelpers["extends"]({},v(f,"error"),{error_metadata:i});t({event:h,state:f});g.lastLoggedError=c}return b}function K(f,h,j){if(j.type==="error_recovery_attempt"&&g.errorRecoveryAttemptState.eventsLogged<i){var k;f=j.payload.recoverableError;if(f!=null&&f.errorName==="OZ_NETWORK"&&!c("NetworkStatus").isOnline())return b;k=babelHelpers["extends"]({},(k=a.metadataProvider)==null?void 0:k.getErrorMetadata({action:j,coreVideoPlayerMetaData:e,loggingMetaData:d,state:h,videoPlayerError:f}),{name:"error_recovery_attempt"});j=babelHelpers["extends"]({},v(h,"error"),{error_metadata:k});t({event:j,state:h});g.errorRecoveryAttemptState.eventsLogged++}return b}function L(a,c,d){d=a.controlledState.playbackState;a=c.controlledState.playbackState;if(g.hasPendingRequestedPlaying||g.shouldLogRequestedPlayingForScrub||g.bufferingSequenceStartClockTimestamp!=null)return b;if(d!=="stalling"&&a==="stalling"){d=v(c,"started_buffering");t({event:d,state:c});g.bufferingSequenceStartClockTimestamp=c.uncontrolledState.clockTimestamp;g.shouldIgnoreDomPause=!0;g.shouldIgnoreDomPlay=!0}return b}function M(a,d,e){a=a.controlledState.playbackState;var f=d.controlledState.playbackState,h=g.bufferingSequenceStartClockTimestamp;if(h==null)return b;if((e.type==="dom_event_playing"||e.type==="buffering_end_requested")&&a==="stalling"&&f!=="stalling"){a=0;e.payload.domEventPerfTimestamp!=null&&(a=Math.max(d.uncontrolledState.perfTimestamp-e.payload.domEventPerfTimestamp,0));f=Math.round(c("gkx")("18028")?Math.max(h,d.uncontrolledState.clockTimestamp-a):d.uncontrolledState.clockTimestamp-a);e=babelHelpers["extends"]({},v(d,"stopped_buffering"),{client_time_ms:f.toString()});t({event:e,state:d});g.bufferingSequenceStartClockTimestamp=null;g.shouldIgnoreDomPause=!1;g.shouldIgnoreDomPlay=!1}return b}function N(a,c,d){a=c.controlledState.playbackState;a==="paused"||a==="ended"?g.nextHeartbeatTime=null:a!=="stalling"&&g.nextHeartbeatTime==null&&(g.nextHeartbeatTime=c.uncontrolledState.clockTimestamp+h);d=g.nextHeartbeatTime;if(d!=null){var e=c.uncontrolledState.clockTimestamp;if(e>=d){if(a!=="stalling"){d=v(c,"heartbeat");t({event:d,state:c})}g.nextHeartbeatTime=e+h}}return b}function O(a){var b=a.errorMessageFormat,c=a.errorName;a=a.errorCode==null||a.errorCode===""?c:a.errorCode;c=c+"#"+a+": "+P(b);return c}function P(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})}function Q(f,h,i){if(!c("gkx")("24360"))return b;if(i.type==="implementation_warning"){var j;f=i.payload.warningError;var k=O(f),l=g.warningState.eventsLoggedTotal;j=(j=g.warningState.eventsLoggedPerKey.get(k))!=null?j:0;if(l<g.warningState.eventsMaxLoggedTotal&&j<g.warningState.eventsMaxLoggedPerKey){g.warningState.eventsLoggedTotal++;g.warningState.eventsLoggedPerKey.set(k,j+1);k=babelHelpers["extends"]({},(l=a.metadataProvider)==null?void 0:l.getErrorMetadata({action:i,coreVideoPlayerMetaData:e,loggingMetaData:d,state:h,videoPlayerError:f}),{name:"player_warning"});j=babelHelpers["extends"]({},v(h,"error"),{error_metadata:k});t({event:j,state:h})}}return b}function R(f,h,i){f=babelHelpers["extends"]({},e.loggingToSNAPLAdditionalData,r);var j=g.lastLoggedTagMetadata,k=(i=a.metadataProvider)==null?void 0:i.getTagMetadata({coreVideoPlayerMetaData:e,logDataAdditions:f,loggingMetaData:d,state:h});if(k&&JSON.stringify(k)!==JSON.stringify(j)){var l={};Object.keys(k).forEach(function(a){if(k[a]!==j[a]){var b;l=babelHelpers["extends"]({},l,(b={},b[a]=k[a],b))}});var m=Object.values(c("MediaPlaybackTagMetadataHighFrequencyCategory"));i=Object.keys(l).every(function(a){return m.includes(a)});if(i)return b;f=babelHelpers["extends"]({},v(h,"tags_changed"),{tag_metadata:l});t({event:f,state:h});g.lastLoggedTagMetadata=babelHelpers["extends"]({},j,k)}return b}return{consumeLoggerEvents:function(){return f.length>0?f.splice(0):[]},handleStateMachine:function(b,c,d){w(d);var e=c.controlledState.playbackState,f=[R,C,D,F,L,M,G,x,H,I,J,K,Q,N];f.forEach(function(a){a(b,c,d)});o&&m(a.debugLogId,b,c,d);(e==="paused"||e==="ended")&&(g.canLogPlayingEvent=!0);d.type==="controller_pause_requested"&&(g.shouldIgnoreDomPause=!0);d.type==="controller_play_requested"&&(g.shouldIgnoreDomPlay=!0);d.type==="dom_event_pause"&&(g.shouldIgnoreDomPause=!1);d.type==="dom_event_play"&&(g.shouldIgnoreDomPlay=!1)},logPausedOnBeforeUnload:function(a){A(a)},setLoggingToSNAPLAdditionalData:function(b){Object.assign(r,b),o&&n(a.debugLogId,b)}}}g.HEARTBEAT_INTERVAL=h;g.createMediaPlaybackCompoundEventStateMachineLogger=a}),98);
__d("OhaiCommonUtils",[],(function(a,b,c,d,e,f){"use strict";e="message/bhttp request";var g="message/bhttp response";function a(a){var b=window.crypto||window.msCrypto;a=new Uint8Array(a);b.getRandomValues(a);return a}function b(a,b){var c=new Uint8Array(b);a=a;for(b=b-1;b>=0;b--)c[b]=a&255,a>>=8;return c}function c(a,b){var c=0;for(var d=0;d<b;d++)c<<=8,c|=a[d];return c}function d(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.reduce(function(a,b){return a+b.length},0),e=new Uint8Array(d),f=0;for(var g of b)e.set(g,f),f+=g.length;return e}var h=new TextEncoder().encode("");f.REQUEST_LABEL=e;f.RESPONSE_LABEL=g;f.randomBytes=a;f.encodeNumber=b;f.decodeNumber=c;f.concat=d;f.EMPTY_AAD=h}),66);
__d("getHpkeFromConfigIds",["AeadAes128Gcm","AeadChaPoly","Hpke","KdfHkdfSha256","KemX25519HkdfSha256"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case d("Hpke").KemID.KemX25519HkdfSha256Id:return new(d("KemX25519HkdfSha256").KemX25519HkdfSha256)()}}function i(a){switch(a){case d("Hpke").KdfID.KdfHkdfSha256Id:return new(d("KdfHkdfSha256").KdfHkdfSha256)()}}function j(a){switch(a){case d("Hpke").AeadID.AeadAes128GcmId:return new(d("AeadAes128Gcm").AeadAes128Gcm)();case d("Hpke").AeadID.AeadChaCha20Poly1305Id:return new(d("AeadChaPoly").AeadChaPoly)()}}function a(a){var b=a.kemId,c=a.kdfId;a=a.aeadId;return new(d("Hpke").Hpke)(h(b),i(c),j(a))}g["default"]=a}),98);
__d("OhaiClient",["HttpRequestBinaryEncode","HttpResponseBinaryDecode","HttpXHRRequestBinaryEncode","OhaiCommonUtils","asyncToGeneratorRuntime","getHpkeFromConfigIds"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=!1);var f=a.keyId,g=a.kemId,h=a.kdfId,i=a.aeadId;a=a.publicKey;var j=c("getHpkeFromConfigIds")({kemId:g,kdfId:h,aeadId:i}),k=new TextEncoder();b=(yield d("HttpRequestBinaryEncode").binaryEncodeRequest(b,e));e=d("OhaiCommonUtils").concat(d("OhaiCommonUtils").encodeNumber(f,1),d("OhaiCommonUtils").encodeNumber(g,2),d("OhaiCommonUtils").encodeNumber(h,2),d("OhaiCommonUtils").encodeNumber(i,2));f=k.encode(d("OhaiCommonUtils").REQUEST_LABEL);g=(yield j.setupBaseS(a,f));h=g.enc;i=g.ctx;k=(yield i.seal(e,b));j=d("OhaiCommonUtils").concat(e,h,k);return{ctx:i,enc:h,encapsulatedRequest:j}});return h.apply(this,arguments)}function e(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=!1);var f=a.keyId,g=a.kemId,h=a.kdfId,i=a.aeadId;a=a.publicKey;var j=c("getHpkeFromConfigIds")({kemId:g,kdfId:h,aeadId:i}),k=new TextEncoder();b=(yield d("HttpXHRRequestBinaryEncode").binaryEncodeRelayAPIRequest(b,e));e=d("OhaiCommonUtils").concat(d("OhaiCommonUtils").encodeNumber(f,1),d("OhaiCommonUtils").encodeNumber(g,2),d("OhaiCommonUtils").encodeNumber(h,2),d("OhaiCommonUtils").encodeNumber(i,2));f=k.encode(d("OhaiCommonUtils").REQUEST_LABEL);g=(yield j.setupBaseS(a,f));h=g.enc;i=g.ctx;k=(yield i.seal(e,b));j=d("OhaiCommonUtils").concat(e,h,k);return{ctx:i,enc:h,encapsulatedRequest:j}});return i.apply(this,arguments)}function f(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=a.aead,f=a.kdf,g=e.nN,h=e.nK,i=Math.max(g,h),j=c.slice(0,i);c=c.slice(i);i=new TextEncoder();a=(yield a["export"](i.encode(d("OhaiCommonUtils").RESPONSE_LABEL),h));b=d("OhaiCommonUtils").concat(b,j);j=(yield f.extract(b,a));b=(yield f.expand(j,i.encode("key"),h));a=(yield f.expand(j,i.encode("nonce"),g));h=(yield e.open(b,a,d("OhaiCommonUtils").EMPTY_AAD,c));f=(yield d("HttpResponseBinaryDecode").binaryDecodeResponse(h));return f});return j.apply(this,arguments)}g.encapsulateRequest=a;g.encapsulateRelayAPIRequest=e;g.decapsulateResponse=f}),98);
__d("VideoPlaybackQuality",[],(function(a,b,c,d,e,f){function a(a){if(typeof a.getVideoPlaybackQuality==="function")return a.getVideoPlaybackQuality().droppedVideoFrames;a=a.webkitDroppedFrameCount;return typeof a==="number"?a:0}function b(a){if(typeof a.getVideoPlaybackQuality==="function")return a.getVideoPlaybackQuality().totalVideoFrames;a=a.webkitDecodedFrameCount;return typeof a==="number"?a:0}f.getDroppedFrames=a;f.getTotalFrames=b}),66);
__d("VideoPlayerContextSensitiveConfigUtils",[],(function(a,b,c,d,e,f){"use strict";var g=function(a,b){return b.every(function(b){return a[b.name]===b.value})};a=function(a,b){return b.find(function(b){return g(a,b.contexts)})};f.getFirstMatchingValueAndContextTargets=a}),66);
__d("VideoPlayerContextSensitiveConfigResolver",["VideoPlayerContextSensitiveConfigPayload","VideoPlayerContextSensitiveConfigUtils","cr:1724253"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1={},this.$2={},a==null?(this.$3=c("VideoPlayerContextSensitiveConfigPayload").static_values,this.$4=c("VideoPlayerContextSensitiveConfigPayload").context_sensitive_values):(this.$3=a.staticValues,this.$4=a.contextSensitiveValues)}var e=a.prototype;e.setContexts=function(a){this.$1=a,this.$2=this.$5(a)};e.getValue=function(a){if(this.$2[a]!=null)return this.$2[a];return this.$3[a]!=null?this.$3[a]:null};e.$5=function(a){var b=this;return Object.keys(this.$4).reduce(function(c,e){var f=b.$4[e];if(f!=null){f=d("VideoPlayerContextSensitiveConfigUtils").getFirstMatchingValueAndContextTargets(a,f);f!=null&&(c[e]=f.value)}return c},{})};a.getPayload=function(){return c("VideoPlayerContextSensitiveConfigPayload")};a.getSources=function(){return b("cr:1724253")};return a}();g["default"]=a}),98);
__d("isPrimitive",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(Object.prototype.toString.call(a)){case"[object String]":case"[object Number]":case"[object Boolean]":case"[object Null]":case"[object Undefined]":return!0}return!1}f["default"]=a}),66);
__d("deepEquals",["isPrimitive"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return function(b,c){return l(b,a[c])}},i=function(a,b){return function(c){return c in a&&c in b&&l(a[c],b[c])}},j=function(a,b){if(a.size!==b.size)return!1;b=new Set(b);for(a of a.keys())if(b.has(a))b["delete"](a);else if(c("isPrimitive")(a))return!1;else{var d=k(b,a);if(d!=null)b["delete"](d);else return!1}return b.size===0};function k(a,b){for(a of a)if(l(a,b))return a;return null}function l(a,b){if(a===b)return!0;if(c("isPrimitive")(a))return!1;if(Object.prototype.toString.call(a)!==Object.prototype.toString.call(b))return!1;if(Array.isArray(a))return a.length===b.length&&a.every(h(b));if(a instanceof Set)return j(a,b);var d=Object.keys(a);return d.length!==Object.keys(b).length?!1:d.every(i(a,b))}g["default"]=l}),98);
__d("VideoPlayerEmsgForStateMachine",["deepEquals"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c;return[a.type,a.emsgScheme,(c=a.emsgId)!=null?c:""].concat(b?[(c=a.emsgStartTimeInSec)!=null?c:"",(b=a.emsgDurationInSec)!=null?b:""]:[]).join(":")}function i(a,b){a.set(h(b,!0),b);return a}function a(a,b){return b.reduce(i,new Map(a))}function b(a,b,d){a=b==null?[]:Array.from(a.values()).filter(function(a){var c=a.emsgStartTimeInSec;a=a.emsgDurationInSec||0;return c!=null&&b>=c&&b<c+a}).sort(function(a,b){return(a.emsgStartTimeInSec||0)-(b.emsgStartTimeInSec||0)});a=Array.from(a.reduce(function(a,b){a.set(h(b,!1),b);return a},new Map()).values());return c("deepEquals")(d,a)?d:a}g.makeEmsgBoxDedupKey=h;g.makeUpdatedAllEmsgBoxes=a;g.makeUpdatedActiveEmsgBoxes=b}),98);
__d("VideoPlayerShakaGlobalConfig",["VideoPlayerContextSensitiveConfigResolver"],(function(a,b,c,d,e,f,g){var h=new(c("VideoPlayerContextSensitiveConfigResolver"))(),i={};a=function(a){i=a};b=function(a,b){if(!!i&&typeof i[a]==="boolean")return i[a];a=h.getValue(a);return a!=null&&typeof a==="boolean"?a:b};d=function(a,b){if(!!i&&typeof i[a]==="number")return i[a];a=h.getValue(a);return a!=null&&typeof a==="number"?a:b};e=function(a,b){if(!!i&&typeof i[a]==="string")return i[a];a=h.getValue(a);return a!=null&&typeof a==="string"?a:b};g.setGlobalOverrideConfig=a;g.getBool=b;g.getNumber=d;g.getString=e}),98);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="oz_www_";a={getBool:function(a,b){return d("VideoPlayerShakaGlobalConfig").getBool(h+a,b)},getNumber:function(a,b){return d("VideoPlayerShakaGlobalConfig").getNumber(h+a,b)},getString:function(a,b){return d("VideoPlayerShakaGlobalConfig").getString(h+a,b)}};b=a;g["default"]=b}),98);
__d("VideoPlayerImplementationEngineVideoElementAPI",["Promise","VideoPlaybackQuality","VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return isNaN(a)?0:a}function j(a){return i(a.duration)}function k(a){var b=[];try{a=a.buffered;for(var c=0;c<a.length;++c)b.push({endTime:a.end(c),startTime:a.start(c)})}catch(a){}return b}function l(a){try{a=a.buffered;if(a.length>0)return a.end(a.length-1)}catch(a){}return 0}function m(a){return i(a.currentTime)}function n(a){try{a=a.buffered;if(a.length>0)return a.start(0)}catch(a){}return 0}function a(a){return{exitPictureInPicture:function(){window.document.exitPictureInPicture()},getBufferedRanges:function(){return k(a)},getCanPlayPromise:function(){return new(h||(h=b("Promise")))(function(b,c){a.readyState===4?b():a.addEventListener("canplay",function(){return b()})})},getDOMLoadedMetadataPromise:function(){return new(h||(h=b("Promise")))(function(b,c){a.addEventListener("loadedmetadata",function(){return b()})})},getDroppedFrameCount:function(){return d("VideoPlaybackQuality").getDroppedFrames(a)},getDuration:function(){return j(a)},getEnded:function(){return a.ended},getError:function(){return a.error},getLastBufferEndPosition:function(){return l(a)},getMuted:function(){return a.muted},getNetworkState:function(){return a.networkState},getPaused:function(){return a.paused},getPlaybackRate:function(){return a.playbackRate},getPlayheadPosition:function(){return m(a)},getReadyState:function(){return a.readyState},getTotalFrameCount:function(){return d("VideoPlaybackQuality").getTotalFrames(a)},getUnderlyingVideoElement:function(){return a},getVideoPixelsDecodedDimensions:function(){var b=a.videoWidth,c=a.videoHeight;return b<=0||c<=0?null:{height:c,width:b}},getVideoPixelsPaintedDimensions:function(){if(a.readyState<a.HAVE_CURRENT_DATA)return null;var b=a.videoWidth,c=a.videoHeight;if(b<=0||c<=0)return null;var d=a.offsetWidth,e=a.offsetHeight;if(d<=0||e<=0)return null;b=b/c;c=d/e;c>b?d=e*b:e=d/b;return{height:e,width:d}},getVolume:function(){return a.volume},pause:function(){a.pause()},play:function(){var c=a.play();c=c&&typeof c.then==="function"?(h||(h=b("Promise"))).resolve(c):null;return c},requestPictureInPicture:function(){typeof a.requestPictureInPicture==="function"&&a.requestPictureInPicture()},setDuration:function(b){a.duration=b},setMuted:function(b){a.muted=b},setPlaybackRate:function(b){a.playbackRate=b},setPlayheadPosition:function(b){var d=b;if(b===0){b=c("VideoPlayerOzWWWGlobalConfig").getNumber("clamp_seek_to_first_buffer_range_epsilon",0);if(b>0){var e=n(a);e>0&&e<=b&&(d=e)}}a.currentTime=d},setVolume:function(b){a.volume=b}}}g.getDurationFromVideoElement=j;g.getBufferedRangesFromVideoElement=k;g.getLastBufferEndPositionFromVideoElement=l;g.getPlayheadPositionFromVideoElement=m;g.createVideoPlayerImplementationEngineVideoElementAPI=a}),98);
__d("VideoPlayerImplementationErrorNormalization",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.getType(),c=a.getDescription();switch(b){case"OZ_NETWORK":b=(b=(b=a.getExtra())==null?void 0:b.code)!=null?b:"0";b=parseInt(b,10);return b<100||b>599?"NetworkError":"HTTPError";case"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":a=(b=a.getExtra())==null?void 0:b.mimeType;if(a!=null&&a.indexOf("video")>-1)return"VideoDecodeError";else if(a!=null&&a.indexOf("audio")>-1)return"AudioDecodeError";else return"GenericDecodeError";case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":if(/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(c))return"ManifestParseError";else return"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError"}return null}function b(a,b){switch(a){case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":if(/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(b))return"ManifestParseError";else return"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError";case"BUFFERING_TIMEOUT":return"RuntimeError";default:b=[[["MEDIA_ERR_NETWORK"],"NetworkError"],[["MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_UNKNOWN"],"GenericDecodeError"]];for(b of b){var c=b[0],d=b[1];if(c.some(function(b){return a.includes(b)}))return d}}return null}f.getVideoPlayerNormalizedErrorTypeFromOzError=a;f.getErrorTypeFromErrorName=b}),66);
__d("getErrorMessageFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}f["default"]=a}),66);
__d("getErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"MEDIA_ERR_UNKNOWN_"+(a!=null?a:"UNDEFINED")}}f["default"]=a}),66);
__d("oz-player/utils/OzError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b,c){var d;c===void 0&&(c=0);d=a.call(this,b.description)||this;d.$OzErrorClass$p_1=b;d.name=b.type;d.message=b.description;b=d.stack;if(!(typeof b==="string"&&b!==""))if(Error.captureStackTrace){var e={};Error.captureStackTrace(e,d.constructor);b=e.stack}else{e=new Error().stack.split("\n");e.splice(/^Error/.test(e[0])?1:0,1);b="Error\n"+e.join("\n")}typeof b==="string"&&b!==""?d.stack=b.split("\n").map(function(a,b){return b===0?d.name+": "+d.message.replace(/\n.*/," (...)"):b-1<c?null:a}).filter(Boolean).join("\n"):d.stack="";return d}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.getExtra=function(){return this.$OzErrorClass$p_1.extra||{}};c.getType=function(){return this.$OzErrorClass$p_1.type};c.getDescription=function(){return this.$OzErrorClass$p_1.description};return b}(babelHelpers.wrapNativeSuper(Error));f.OzErrorClass=a}),66);
__d("oz-player/utils/OzErrorUtils",["oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){function h(a){if(typeof a==="object"&&a!=null&&a.stack===void 0)try{throw a}catch(a){}}function i(a){return a instanceof d("oz-player/utils/OzError").OzErrorClass}function j(a,b){b===void 0&&(b=0);b=new(d("oz-player/utils/OzError").OzErrorClass)(a,1+b);h(b);h((a=a.extra)==null?void 0:a.originalError);return b}function a(a){return j({type:"OZ_CANCELLED",description:"Cancelled: "+a},1)}function b(a){var b=a.description,c=a.requestUrl,d=a.responseStatus,e=a.responseHeaders;a=a.responseBody;return j({type:"OZ_NETWORK",description:b+" Status:"+d+(a!=null?" Body:"+a.length+":"+a.substr(0,200)+(a.length>200?"...":""):""),extra:{code:d.toString(),headers:e,url:c}},1)}function c(a,b){h(a);var c=i(a)?a:null;return j(babelHelpers["extends"]({},b,{type:c?c.getType():b.type,description:b.description+" - "+(!(a instanceof Error)&&typeof a==="object"&&a!=null&&typeof a.message==="string"?a.message:String(a)),extra:babelHelpers["extends"]({},b.extra,{originalError:a})}),1)}function e(a,b){return j({type:a.getType(),description:a.getDescription(),extra:babelHelpers["extends"]({},a.getExtra(),{mimeType:b})})}function f(a){var b,c;i(a)?(b=a.getExtra().code||"",c=a):(b=a.status!=null&&a.status!==""?a.status.toString():"0",c=j({type:"OZ_NETWORK",description:a.message,extra:{originalError:a,code:b,url:a.url}}));return[c,b]}g.isOzError=i;g.createOzError=j;g.createOzCancelledError=a;g.createOzNetworkError=b;g.convertPromiseRejectionReasonToOzError=c;g.getOzErrorWithMIMEType=e;g.getNormalizedErrorAndCode=f}),98);
__d("VideoPlayerImplementationErrors",["VideoPlayerImplementationErrorNormalization","getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode","getErrorSafe","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b;a=/^([A-Z_]+:)|([A-Z_]+\s+\(0x[0-9A-Fa-f]+\))/.exec(a);a=((b=(b=a==null?void 0:a[1])!=null?b:a==null?void 0:a[2])!=null?b:"").replace(/\s+/,"_").replace(/[^A-Za-z0-9_]/g,"");return a!==""?a:null}function a(a){var b=a.errorLocation,d=a.hostCallError,e=a.videoElementError,f=a.videoElementNetworkState;a=a.videoElementReadyState;var g=e==null?void 0:e.code,h=d!=null&&typeof d.message==="string"?d.message:null;h==null&&(h=e==null?void 0:e.message);h==null&&g!=null&&(h=c("getErrorMessageFromMediaErrorCode")(g));e=c("getErrorNameFromMediaErrorCode")(g);return{createdTimestamp:Date.now(),errorLocation:b,errorMessageFormat:(h!=null?h:"Empty error")+("; code: "+(g!=null?g:"undefined"))+("; readyState: "+a)+("; networkState: "+f),errorMessageParams:[],errorName:e,originalError:d}}function b(a,b){var d=c("getErrorSafe")(a);return{createdTimestamp:Date.now(),errorCode:typeof a==="object"&&a!=null?typeof a.code==="string"?a.code:typeof a.code==="number"?String(a.code):void 0:void 0,errorLocation:b,errorMessageFormat:(a=d.messageFormat)!=null?a:d.message,errorMessageParams:d.messageFormat!=null?(b=d.messageParams)!=null?b:[]:[],errorName:"VideoElementPlayPromiseRejectionReason_"+(d.name||"UnknownError")}}function i(a,b,d,e){e===void 0&&(e=null);b=c("getErrorSafe")(b);return{createdTimestamp:Date.now(),errorCode:null,errorLocation:d,errorMessageFormat:(b.name||"UnknownError")+" "+((d=b.messageFormat)!=null?d:b.message),errorMessageParams:b.messageFormat!=null?(d=b.messageParams)!=null?d:[]:[],errorName:a,stack:b.stack,url:e!=null?e:null}}function e(a,b){if(d("oz-player/utils/OzErrorUtils").isOzError(a)){var c=a,e=c.getExtra();return{createdTimestamp:Date.now(),errorCode:e.code,errorLocation:b,errorMessageFormat:c.getDescription(),errorMessageParams:[],errorName:c.getType(),errorType:d("VideoPlayerImplementationErrorNormalization").getVideoPlayerNormalizedErrorTypeFromOzError(c),stack:c.stack,url:e.url}}else return i("OZ_JAVASCRIPT_NATIVE",a,b)}function f(a,b){var c=h(a.message);c=c!=null?a.name+"_"+c:a.name;a=a.message;var d=[];return{createdTimestamp:Date.now(),errorLocation:b,errorMessageFormat:a,errorMessageParams:d,errorName:c,errorType:"GenericDecodeError"}}g.getMoreGranularErrorNameFromHTMLVideoElementErrorMessage=h;g.createVideoPlayerErrorFromHTMLVideoElementError=a;g.createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason=b;g.createVideoPlayerErrorFromGenericError=i;g.createVideoPlayerErrorFromOzImplementationError=e;g.createVideoPlayerErrorFromOzImplementationVideoNodeError=f}),98);
__d("VideoPlayerODS",["ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,b,c){d("Random").coinflip(c)&&(h||(h=d("ODS"))).bumpEntityKey(2079,a,b,c)};g.bumpEntityKey=a}),98);
__d("VideoPlayerImplementationStateMachine",["FBLogger","VideoPlayerEmsgForStateMachine","VideoPlayerImplementationErrors","VideoPlayerODS","gkx","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.bufferingDetected,c=a.seeking;a=a.waitingForDomPlaying;return!b&&!c&&!a}function i(a){var b=a.bufferingDetected,d=a.prevPlaybackState,e=a.seeking;a=a.waitingForDomPlaying;b=h({bufferingDetected:b,seeking:e,waitingForDomPlaying:a});e=d;switch(d){case"stalling":e=b?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:d;c("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",d);break}return e}function j(a){return a.loopCount>0&&a.loopCurrent<a.loopCount||a.loopCount===-1}function k(a,b,e,f){switch(e.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":case"host_call_set_latency_level":return babelHelpers["extends"]({},a,{hostCallQueue:a.hostCallQueue.concat([e])});case"controller_set_latency_level_requested":case"implementation_set_latency_level_requested":return babelHelpers["extends"]({},a,{latencyLevel:e.payload.latencyLevel,ullIneligibilityReason:e.payload.ullIneligibilityReason});case"dom_event_loadedmetadata":return babelHelpers["extends"]({},a,{domEventsLatestPerfMs:babelHelpers["extends"]({},a.domEventsLatestPerfMs,{clockMs:b.clockTimestamp,loadedmetadata:e.payload.domEventPerfTimestamp,perfMs:b.perfTimestamp})});case"dom_event_loadeddata":return babelHelpers["extends"]({},a,{domEventsLatestPerfMs:babelHelpers["extends"]({},a.domEventsLatestPerfMs,{clockMs:b.clockTimestamp,loadeddata:e.payload.domEventPerfTimestamp,perfMs:b.perfTimestamp})});case"dom_event_canplay":return babelHelpers["extends"]({},a,{domEventsLatestPerfMs:babelHelpers["extends"]({},a.domEventsLatestPerfMs,{canplay:e.payload.domEventPerfTimestamp,clockMs:b.clockTimestamp,perfMs:b.perfTimestamp})});case"dom_event_ended":return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":if(a.playbackState==="ended")return a;if(b.videoElementEnded===!0)return babelHelpers["extends"]({},a,{playbackState:"ended",waitingForDomPlaying:!1});return a.playbackState==="paused"?a:babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":var g=a.playbackState,h=g;switch(g){case"playing":case"stalling":case"ended":case"paused":h="stalling";break;default:g;c("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",g);break}g=!0;return babelHelpers["extends"]({},a,{playbackState:h,waitingForDomPlaying:g});case"dom_event_playing":h=a.bufferingDetected;g=a.seeking;var k=!1,l=a.playbackState;return babelHelpers["extends"]({},a,{playbackState:i({bufferingDetected:h,prevPlaybackState:l,seeking:g,waitingForDomPlaying:k}),waitingForDomPlaying:k});case"dom_event_timeupdate":h=d("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(a.allEmsgBoxes,b.videoElementPlayheadPosition,a.activeEmsgBoxes);if(a.waitingForDomTimeUpdateAfterSeeked){l=a.bufferingDetected;g=a.seeking;k=!1;var m=a.playbackState;return babelHelpers["extends"]({},a,{activeEmsgBoxes:h,playbackState:i({bufferingDetected:l,prevPlaybackState:m,seeking:g,waitingForDomPlaying:k}),waitingForDomPlaying:k,waitingForDomTimeUpdateAfterSeeked:!1})}return babelHelpers["extends"]({},a,{activeEmsgBoxes:h});case"dom_event_seeking":l=a.playbackState;m=l;switch(l){case"paused":case"ended":break;case"stalling":case"playing":m="stalling";break;default:l,c("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",l)}return babelHelpers["extends"]({},a,{playbackState:m,seeking:!0,waitingForDomPlaying:!0});case"dom_event_seeked":g=a.bufferingDetected;k=a.waitingForDomPlaying;h=!1;l=a.playbackState;return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:null,playbackState:i({bufferingDetected:g,prevPlaybackState:l,seeking:h,waitingForDomPlaying:k}),seeking:h,waitingForDomTimeUpdateAfterSeeked:!0});case"dom_event_error":e.payload.videoElementError==null&&d("VideoPlayerODS").bumpEntityKey("comet_video_player","dom_event_error.error_is_nullish",14);return babelHelpers["extends"]({},a,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:e.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return a.hostCallPlayIDLast!==e.payload.hostCallPlayID?a:babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":if(a.hostCallPlayIDLast!==e.payload.hostCallPlayID)return a;if(f==="comet_nextgendash"){m=e.payload.playPromiseRejectionReason;return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null},!(m!=null&&m.name==="AbortError")&&a.playbackState==="stalling"?{playbackState:"paused",waitingForDomPlaying:!1}:{})}return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null,playbackState:a.playbackState==="stalling"?"paused":a.playbackState,waitingForDomPlaying:!1});case"dom_event_durationchange":if(f==="comet_nextgendash"){g=b.videoElementEnded===!0?"ended":b.videoElementPaused===!0?"paused":a.playbackState;if((a.playbackState==="stalling"||a.playbackState==="playing")&&g!==a.playbackState)return babelHelpers["extends"]({},a,{playbackState:g,waitingForDomPlaying:!1})}return a;case"implementation_host_call_queue_flushed":return babelHelpers["extends"]({},a,{hostCallQueue:[]});case"implementation_host_call_failed":l=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:e.payload.errorLocation,hostCallError:e.payload.hostCallError,videoElementError:e.payload.videoElementError,videoElementNetworkState:e.payload.videoElementNetworkState,videoElementReadyState:e.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:l,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_mounted":return babelHelpers["extends"]({},a,{mountState:"mounted_onscreen"});case"implementation_unmounted":return babelHelpers["extends"]({},a,{mountState:"unmounted"});case"implementation_onscreen":return babelHelpers["extends"]({},a,{mountState:"mounted_onscreen"});case"implementation_offscreen":return babelHelpers["extends"]({},a,{mountState:"mounted_offscreen"});case"implementation_video_node_unmounted":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"implementation_engine_initialized":h=(k=e.payload.streamingFormat)!=null?k:a.streamingFormat;return babelHelpers["extends"]({},a,{hostCallCanApply:!0,selectedVideoQuality:e.payload.selectedVideoQuality,streamingFormat:h});case"implementation_engine_qualities_changed":f=(m=e.payload.streamingFormat)!=null?m:a.streamingFormat;return babelHelpers["extends"]({},a,{selectedVideoQuality:e.payload.selectedVideoQuality,streamingFormat:f});case"implementation_engine_destroyed":return babelHelpers["extends"]({},a,{hostCallPlayIDLast:null});case"implementation_fatal_error":return babelHelpers["extends"]({},a,{error:e.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1});case"controller_inject_fatal_error":return babelHelpers["extends"]({},a,{error:e.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:e.payload.seekSourcePosition});case"representation_changed":return babelHelpers["extends"]({},a);case"controller_pause_requested":return a.playbackState==="ended"?a:babelHelpers["extends"]({},a,{lastPausedTimeMs:Date.now(),lastPauseReason:e.payload.reason,lastPlayedTimeMs:0,playbackState:"paused",waitingForDomPlaying:!1,watchTimeMs:a.lastPlayedTimeMs>0?a.watchTimeMs+(Date.now()-a.lastPlayedTimeMs):a.watchTimeMs});case"controller_play_requested":return a.playbackState!=="paused"&&a.playbackState!=="ended"?a:babelHelpers["extends"]({},a,{hasPlayEverBeenRequested:!0,lastPlayedTimeMs:a.lastPlayedTimeMs===0?Date.now():a.lastPlayedTimeMs,lastPlayReason:e.payload.reason,loopCurrent:j(a)?e.payload.reason==="loop_initiated"?a.loopCurrent+1:a.loopCurrent:0,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(g=b.videoElementPlayheadPosition)!=null?g:a.implementationSeekSourcePosition,seeking:!0,seekTargetPosition:e.payload.seekTargetPosition});case"controller_quality_requested":return babelHelpers["extends"]({},a,{selectedVideoQuality:e.payload.selectedVideoQuality});case"controller_video_variant_requested":return babelHelpers["extends"]({},a,{selectedVideoVariant:e.payload.selectedVideoVariant});case"controller_set_caption_display_style_requested":return babelHelpers["extends"]({},a,{captionDisplayStyle:e.payload.captionDisplayStyle});case"controller_set_picture_in_picture_state_requested":return babelHelpers["extends"]({},a,{isDesktopPictureInPicture:e.payload.isInPictureInPictureMode});case"controller_set_caption_format_requested":return babelHelpers["extends"]({},a,{captionFormat:e.payload.captionFormat});case"controller_set_playback_rate":return babelHelpers["extends"]({},a,{targetPlaybackRate:e.payload.playbackRate});case"controller_muted_requested":return babelHelpers["extends"]({},a,{lastMuteReason:e.payload.reason,muted:e.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},a,{volume:e.payload.volume});case"controller_scrub_begin_requested":return a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return!a.scrubbing?a:babelHelpers["extends"]({},a,{implementationSeekSourcePosition:(l=b.videoElementPlayheadPosition)!=null?l:a.implementationSeekSourcePosition,scrubbing:!1,seeking:e.payload.seekTargetPosition!=null,seekTargetPosition:e.payload.seekTargetPosition});case"buffering_begin_requested":k=a.playbackState;h=k;switch(k){case"paused":case"ended":break;case"playing":case"stalling":h="stalling";break;default:k;c("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",k);break}m=e.payload.bufferingType;return babelHelpers["extends"]({},a,{bufferingDetected:!0,lastBufferingType:m,playbackState:h});case"buffering_end_requested":f=a.seeking;g=a.waitingForDomPlaying;l=!1;k=a.playbackState;return babelHelpers["extends"]({},a,{bufferingDetected:l,playbackState:i({bufferingDetected:l,prevPlaybackState:k,seeking:f,waitingForDomPlaying:g})});case"controller_set_captions_visible_requested":m=e.payload.captionsVisible;return a.captionsVisible===m?a:babelHelpers["extends"]({},a,{activeCaptions:m?a.activeCaptions:null,captionsLocale:m?a.captionsLocale:null,captionsVisible:m});case"controller_set_active_captions_requested":h=e.payload.activeCaptions;k=(l=h==null?void 0:h.rows)!=null?l:[];f=e.payload.captionsLocale;g=a.activeCaptions;var n=(m=g==null?void 0:g.rows)!=null?m:[];return n.length===k.length&&k.every(function(a,b){return n[b]===a})?a:babelHelpers["extends"]({},a,{activeCaptions:h,captionsLocale:f});case"captions_loaded":return babelHelpers["extends"]({},a,{activeCaptions:a.activeCaptions,captionsLoaded:!0});case"captions_unloaded":return babelHelpers["extends"]({},a,{activeCaptions:null,captionsLoaded:!1,captionsLocale:null});case"inband_captions_autogenerated_changed":l=e.payload.inbandCaptionsAutogenerated;return a.inbandCaptionsAutogenerated===l?a:babelHelpers["extends"]({},a,{inbandCaptionsAutogenerated:l});case"stream_ended":return babelHelpers["extends"]({},a,{streamEnded:!0});case"stream_gone_before_start":return babelHelpers["extends"]({},a,{playbackState:"ended",streamEnded:!0,waitingForDomPlaying:!1});case"stream_interrupted":return babelHelpers["extends"]({},a,{streamInterrupted:!0});case"stream_resumed":return babelHelpers["extends"]({},a,{streamInterrupted:!1});case"seekable_ranges_changed":g=e.payload.seekableRanges;return babelHelpers["extends"]({},a,{seekableRanges:g});case"controller_set_is_live_rewind_active_requested":m=e.payload.isLiveRewindActive;return babelHelpers["extends"]({},a,{isLiveRewindActive:m});case"loop_count_change_requested":k=e.payload.loopCount;return k===a.loopCount?a:babelHelpers["extends"]({},a,{loopCount:k,loopCurrent:0});case"player_dimensions_changed":h=e.payload.dimensions;f=h.height;l=h.width;return l===a.dimensions.width&&f===a.dimensions.height?a:babelHelpers["extends"]({},a,{dimensions:{height:f,width:l}});case"emsg_boxes_parsed":g=d("VideoPlayerEmsgForStateMachine").makeUpdatedAllEmsgBoxes(a.allEmsgBoxes,e.payload.emsgBoxes);m=d("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(g,b.videoElementPlayheadPosition,a.activeEmsgBoxes);return babelHelpers["extends"]({},a,{activeEmsgBoxes:m,allEmsgBoxes:g});case"register_emsg_observer":k=new Set(a.emsgObserverTokens);k.add(e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:k});case"unregister_emsg_observer":h=new Set(a.emsgObserverTokens);h["delete"](e.payload.token);return babelHelpers["extends"]({},a,{emsgObserverTokens:h});default:return a}}function l(a,b,d){var e=b.type!=="dom_seeking";e=e?d:a.uncontrolledState;d=!c("shallowEqual")(e,a.uncontrolledState);b=k(a.controlledState,e,b,a.playerVersion);var f=!c("shallowEqual")(b,a.controlledState);return d||f?babelHelpers["extends"]({},a,{controlledState:f?b:a.controlledState,uncontrolledState:d?e:a.uncontrolledState}):a}var m,n;function o(a){var b=a.collectUncontrolledState,d=a.debugLogId;d=a.initialState;var e=a.onDispatched,f=a.onFatalError,g=d,h=g,i=0,j=!1,k=!1,m=!0,n=!0;return{dispatch:function(a){if(!n)return;var d=null,g=null;try{++i;if(i>=10)if(!j){j=!0;throw c("FBLogger")("comet_video_player").mustfixThrow("Video player state machine loop detected")}else return;var o=h.uncontrolledState;if(m)try{o=b()}catch(a){m=!1,g=a}var p=h;o=l(p,a,o);h=o;e(p,o,a)}catch(a){n=!1,d=a}finally{if(!k&&(d!=null||g!=null)){k=!0;try{f(d!=null?d:g)}catch(a){}}--i}},getCurrentState:function(){return h},getInitialState:function(){return g}}}var p,q;function a(a){var b=a.collectUncontrolledState,c=a.debugLogId,d=a.initialState,e=a.onFatalError,f=a.stateTransitionHandlers;function g(a,b,c){try{var d=!0,e=0;while(d&&e<f.length){var g=f[e];d=g(a,b,c);++e}}finally{}}return o({collectUncontrolledState:b,debugLogId:c,initialState:d,onDispatched:g,onFatalError:e})}function b(a,b){function c(){}function d(a){return a}function e(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c)}}function f(c){return function(e){var f=d(e.currentTarget);b(f,["reactEvent("+e.type+")"]);a.dispatch(c(e,f))}}return{onAbort:c,onCanPlay:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_canplay"}}),onCanPlayThrough:c,onDurationChange:e({type:"dom_event_durationchange"}),onEmptied:c,onEncrypted:c,onEnded:e({type:"dom_event_ended"}),onError:f(function(a,b){return{payload:{videoElementError:b.error,videoElementNetworkState:b.networkState,videoElementReadyState:b.readyState},type:"dom_event_error"}}),onLoadedData:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_loadeddata"}}),onLoadedMetadata:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_loadedmetadata"}}),onLoadStart:c,onPause:e({type:"dom_event_pause"}),onPlay:e({type:"dom_event_play"}),onPlaying:f(function(a){return{payload:{domEventPerfTimestamp:a.timeStamp},type:"dom_event_playing"}}),onProgress:e({type:"dom_event_progress"}),onRateChange:e({type:"dom_event_ratechange"}),onSeeked:e({type:"dom_event_seeked"}),onSeeking:e({type:"dom_event_seeking"}),onStalled:c,onSuspend:c,onTimeUpdate:e({type:"dom_event_timeupdate"}),onVolumeChange:e({type:"dom_event_volumechange"}),onWaiting:e({type:"dom_event_waiting"})}}g.createVideoPlayerImplementationStateMachine=o;g.createVideoPlayerImplementationStateMachineWithStateTransitionHandlers=a;g.createReactVideoElementCallbacksForStateMachine=b}),98);
__d("convertToViewabilityPercentage",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a>=.99)return 100;else if(a>=.75)return 75;else if(a>=.5)return 50;else if(a>=.25)return 25;else if(a>=0)return 0;else return-2}f["default"]=a}),66);
__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["NetworkStatus","convertToViewabilityPercentage","gkx","performance"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,d=a.engineExtrasAPI,e=a.fullscreenControllerRef,f=a.videoElementAPI,g=a.videoLiveTraceRef;a=a.videoPlayerPassiveViewabilityInfo;g=g.current;var i=Date.now(),j=typeof (h||(h=c("performance"))).now==="function"?(h||(h=c("performance"))).now():0;if(f==null){var k;return{audioRepresentationID:void 0,availableAudioTracks:[],availableQualities:[],availableVideoTracks:[],clockTimestamp:i,currentPlayingAudioTrackID:void 0,currentPlayingVideoQuality:void 0,currentPlayingVideoTrackID:void 0,estimatedBandwidth:void 0,isDocumentHidden:document.hidden,isDRM:void 0,isFBIsLiveTemplated:void 0,isFBMS:void 0,isFBWasLive:void 0,isFullscreen:e.current?e.current.getIsFullscreen():void 0,isLiveRewindAvailable:void 0,isMixedCodecManifest:null,isPredictiveDash:void 0,liveTraceContext:g?(k=g.getLiveTraceContext())!=null?k:void 0:void 0,manifestIdentifier:void 0,mpdValidationErrors:void 0,networkConnected:void 0,perfTimestamp:j,targetAudioTrack:null,targetVideoQuality:"",videoElementDebugCurrentSrc:void 0,videoElementDebugSrc:void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoProjection:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0}}k=f.getPlayheadPosition();a=a.getCurrent();return{audioRepresentationID:d?d.getCurrentPlayingAudioRepresentationID():void 0,availableAudioTracks:(b=d==null?void 0:d.getAvailableAudioTracks())!=null?b:[],availableQualities:(b=d==null?void 0:d.getAvailableVideoQualities())!=null?b:[],availableVideoTracks:(b=d==null?void 0:d.getAvailableVideoTracks())!=null?b:[],clockTimestamp:i,currentPlayingAudioTrackID:d?d.getCurrentPlayingAudioRepresentationID():void 0,currentPlayingVideoQuality:d?d.getCurrentPlayingVideoQuality():void 0,currentPlayingVideoTrackID:d?d.getCurrentPlayingVideoRepresentationID():void 0,estimatedBandwidth:d?d.getEstimatedBandwidth():void 0,isDocumentHidden:document.hidden,isDRM:d?d.isDrm():void 0,isFBIsLiveTemplated:d?d.isFBIsLiveTemplated():void 0,isFBMS:d?d.isFBMS():void 0,isFBWasLive:d?d.isFBWasLive():void 0,isFullscreen:e.current?e.current.getIsFullscreen():void 0,isLiveRewindAvailable:d?d.isLiveRewindAvailable():void 0,isMixedCodecManifest:d?d.isMixedCodecManifest():null,isPredictiveDash:d?d.isPredictiveDash():void 0,liveTraceContext:g?(b=g.getLiveTraceContext())!=null?b:void 0:void 0,manifestIdentifier:d?d.getManifestIdentifier():void 0,mpdValidationErrors:d?d.getMpdValidationErrors():void 0,networkConnected:c("NetworkStatus").isOnline(),perfTimestamp:j,targetAudioTrack:(i=d==null?void 0:d.getTargetAudioTrack())!=null?i:null,targetVideoQuality:(e=d==null?void 0:d.getCurrentTargetVideoQuality())!=null?e:"",videoElementDebugCurrentSrc:c("gkx")("24351")?(g=f.getUnderlyingVideoElement())==null?void 0:g.currentSrc:void 0,videoElementDebugSrc:c("gkx")("24351")?(b=f.getUnderlyingVideoElement())==null?void 0:b.src:void 0,videoElementDroppedFrameCount:f.getDroppedFrameCount(),videoElementDuration:f.getDuration(),videoElementEnded:f.getEnded(),videoElementError:f.getError(),videoElementLastBufferEndPosition:f.getLastBufferEndPosition(),videoElementMuted:f.getMuted(),videoElementNetworkState:f.getNetworkState(),videoElementPaused:f.getPaused(),videoElementPlaybackRate:f.getPlaybackRate(),videoElementPlayheadPosition:k,videoElementReadyState:f.getReadyState(),videoElementTotalFrameCount:f.getTotalFrameCount(),videoElementVolume:f.getVolume(),videoProjection:d==null?void 0:d.getVideoProjectionType(),videoRepresentationID:d?d.getCurrentPlayingVideoRepresentationID():void 0,viewabilityPercentage:a?c("convertToViewabilityPercentage")(a.visiblePercentage):void 0}}g.createVideoPlayerImplementationStateMachineStateUncontrolledState=a}),98);
__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.alwaysShowCaptions,c=a.areCaptionsAutogenerated,e=a.captionDisplayStyle,f=a.dimensions,g=a.isAbrEnabled,h=a.playerVersion,i=a.streamingFormat;a=a.videoPlayerPassiveViewabilityInfo;var j=!0,k=1;a=d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoLiveTraceRef:{current:null},videoPlayerPassiveViewabilityInfo:a});return{controlledState:{activeCaptions:null,activeEmsgBoxes:[],allEmsgBoxes:new Map(),bufferingDetected:!1,captionDisplayStyle:e,captionFormat:null,captionsLoaded:!1,captionsLocale:null,captionsVisible:b,dimensions:f,domEventsLatestPerfMs:{},emsgObserverTokens:new Set(),error:null,hasPlayEverBeenRequested:!1,hostCallCanApply:!1,hostCallPlayIDLast:null,hostCallQueue:[],implementationSeekSourcePosition:null,inbandCaptionsAutogenerated:c,isDesktopPictureInPicture:!1,isLiveRewindActive:!1,lastBufferingType:null,lastMuteReason:null,lastPausedTimeMs:0,lastPauseReason:null,lastPlayedTimeMs:0,lastPlayReason:null,latencyLevel:"normal",loopCount:0,loopCurrent:0,mountState:"before_mounted",muted:j,playbackState:"paused",scrubbing:!1,seekableRanges:null,seeking:!1,seekTargetPosition:null,selectedVideoQuality:"notselected",selectedVideoVariant:null,streamEnded:!1,streamingFormat:i,streamInterrupted:!1,targetPlaybackRate:1,ullIneligibilityReason:null,volume:k,waitingForDomPlaying:!1,waitingForDomTimeUpdateAfterSeeked:!1,watchTimeMs:0},isAbrEnabled:g,playerVersion:h,uncontrolledState:a}}g.createVideoPlayerImplementationStateMachineInitialState=a}),98);
__d("WASmaxInPrivatestatsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInPrivatestatsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInPrivatestatsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInPrivatestatsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInPrivatestatsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInPrivatestatsSignCredentialNoRetryError",["WAResultOrError","WASmaxInPrivatestatsIQErrorBadRequestMixin","WASmaxInPrivatestatsIQErrorFeatureNotImplementedMixin","WASmaxInPrivatestatsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPrivatestatsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInPrivatestatsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:c.value});var e=d("WASmaxInPrivatestatsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorFeatureNotImplemented","IQErrorServiceUnavailable"],[b,c,e])}g.parseSignCredentialNoRetryError=a}),98);
__d("WASmaxInPrivatestatsSignCredentialResponseErrorNoRetry",["WAResultOrError","WASmaxInPrivatestatsIQErrorResponseMixin","WASmaxInPrivatestatsSignCredentialNoRetryError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPrivatestatsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPrivatestatsSignCredentialNoRetryError").parseSignCredentialNoRetryError(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorSignCredentialNoRetryError:b.value}))}g.parseSignCredentialResponseErrorNoRetry=a}),98);
__d("WASmaxInPrivatestatsSignCredentialResponseErrorRetry",["WAResultOrError","WASmaxInPrivatestatsIQErrorInternalServerErrorMixin","WASmaxInPrivatestatsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInPrivatestatsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);if(!c.success)return c;a=d("WASmaxInPrivatestatsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorInternalServerErrorMixin:c.value},a.value))}g.parseSignCredentialResponseErrorRetry=a}),98);
__d("WASmaxInPrivatestatsSignCredentialResponseSuccess",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"sign_credential");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"signed_credential");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"acs_public_key");if(!f.success)return f;var g=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"dleq_proof");if(!g.success)return g;var h=d("WASmaxParseUtils").flattenedChildWithTag(g.value,"c");if(!h.success)return h;g=d("WASmaxParseUtils").flattenedChildWithTag(g.value,"s");if(!g.success)return g;var i=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"project_name");if(!i.success)return i;var j=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!j.success)return j;j=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",j.value);if(!j.success)return j;j=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!j.success)return j;b=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(c.value,"t",0,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").contentBytesRange(e.value,32,32);if(!a.success)return a;c=d("WASmaxParseUtils").contentBytesRange(f.value,32,32);if(!c.success)return c;e=d("WASmaxParseUtils").contentBytesRange(h.value,32,32);if(!e.success)return e;f=d("WASmaxParseUtils").contentBytesRange(g.value,32,32);if(!f.success)return f;h=d("WASmaxParseUtils").contentString(i.value);return!h.success?h:d("WAResultOrError").makeResult({type:j.value,signCredentialT:b.value,signCredentialSignedCredentialElementValue:a.value,signCredentialAcsPublicKeyElementValue:c.value,signCredentialDleqProofCElementValue:e.value,signCredentialDleqProofSElementValue:f.value,signCredentialProjectNameElementValue:h.value})}g.parseSignCredentialResponseSuccess=a}),98);
__d("WASmaxOutPrivatestatsSignCredentialRequest",["WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b,c=a.blindedCredentialElementValue;a=a.projectNameElementValue;c=(b=d("WASmaxJsx")).smax("iq",{xmlns:"privatestats",id:d("WAWap").generateId(),type:"get",to:d("WAWap").S_WHATSAPP_NET},b.smax("sign_credential",{version:"2"},b.smax("blinded_credential",null,c),b.smax("project_name",null,a)));return c}g.makeSignCredentialRequest=a}),98);
__d("WASmaxPrivatestatsSignCredentialRPC",["WAComms","WASmaxInPrivatestatsSignCredentialResponseErrorNoRetry","WASmaxInPrivatestatsSignCredentialResponseErrorRetry","WASmaxInPrivatestatsSignCredentialResponseSuccess","WASmaxOutPrivatestatsSignCredentialRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutPrivatestatsSignCredentialRequest").makeSignCredentialRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInPrivatestatsSignCredentialResponseSuccess").parseSignCredentialResponseSuccess(b,a);if(c.success)return{name:"SignCredentialResponseSuccess",value:c.value};var e=d("WASmaxInPrivatestatsSignCredentialResponseErrorNoRetry").parseSignCredentialResponseErrorNoRetry(b,a);if(e.success)return{name:"SignCredentialResponseErrorNoRetry",value:e.value};b=d("WASmaxInPrivatestatsSignCredentialResponseErrorRetry").parseSignCredentialResponseErrorRetry(b,a);if(b.success)return{name:"SignCredentialResponseErrorRetry",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SignCredential",{Success:c,ErrorNoRetry:e,ErrorRetry:b}))});return h.apply(this,arguments)}g.sendSignCredentialRPC=a}),98);
__d("WAWebCRUDOperationsACSTokens",["WAWebSchemaACSTokens","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){b===void 0&&(b=d("WAWebSchemaACSTokens").getACSTokensTable());return b.createOrReplace(a)}function a(a,b){var c=a+"-default";return h(babelHelpers["extends"]({project:a},b,{tokenName:c}))}function c(a,b){b=b.map(function(b,c){return babelHelpers["extends"]({},b,{project:a,tokenName:a+"-"+c})});return d("WAWebSchemaACSTokens").getACSTokensTable().bulkCreateOrReplace(b)}function i(a,b){b===void 0&&(b=d("WAWebSchemaACSTokens").getACSTokensTable());return b.anyOf(["project"],[a])}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=d("WAWebSchemaACSTokens").getACSTokensTable());a=(yield i(a,b));return a.length>0?a[0]:null});return j.apply(this,arguments)}function f(a){return d("WAWebSchemaACSTokens").getACSTokensTable().get(a)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield i(a,b));yield b.bulkRemove(a.map(function(a){return a.tokenName}))});return l.apply(this,arguments)}g.upsertACSToken=h;g.storeACSTokenForProject=a;g.storeACSTokensForProject=c;g.getACSTokensByProject=i;g.getACSTokenByProject=e;g.getACSTokenByName=f;g.deleteAllACSTokensByProject=k}),98);
__d("WAWebFetchACSTokens",["WAPromiseRetryLoop","WASmaxPrivatestatsSignCredentialRPC","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=3;function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return d("WASmaxPrivatestatsSignCredentialRPC").sendSignCredentialRPC({projectNameElementValue:a,blindedCredentialElementValue:b})});return j.apply(this,arguments)}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=1,f=function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=(yield i(a,c));switch(d.name){case"SignCredentialResponseErrorNoRetry":return b({result:null});case"SignCredentialResponseErrorRetry":e+=1;if(e>h)return b({result:null});return;default:d.name;return b({result:d.value})}});return function(a){return d.apply(this,arguments)}}();f=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"issueACSTokenForProject-"+a,timer:{algo:{type:"exponential",first:250},max:1e3},code:f});f.start();return f.promise()});return k.apply(this,arguments)}g.fetchACSTokenForProject=i;g.fetchACSTokenForProjectWithRetry=a}),98);
__d("WAWebACSTokenConfig",["WATimeUtils","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";var h={WA_StatusMusic:{getMaxRedeemCount:function(){return 50},getMaxExpirySeconds:function(){return d("WATimeUtils").DAY_SECONDS}},WA_StatusMusicReporting:{getMaxRedeemCount:function(){return 50},getMaxExpirySeconds:function(){return d("WATimeUtils").DAY_SECONDS}}};function a(a){return{maxRedeemCount:h[a].getMaxRedeemCount(),maxExpirySeconds:h[a].getMaxExpirySeconds()}}b=c("keyMirror")(h);g.getACSTokenConfig=a;g.ACS_PROJECTS=b}),98);
__d("WAWebACSTokenUtils",["WALogger","WATimeUtils","WAWebACSTokenConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.redeemCount,c=a.creationTs;a=a.projectName;var e=d("WAWebACSTokenConfig").getACSTokenConfig(a),f=e.maxExpirySeconds;e=e.maxRedeemCount;if(!d("WATimeUtils").happenedWithin(c,f)){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["The "," ACS token expired. The client shall re-issue a new one"])),a);return!1}if(b>=e){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["The "," ACS token was redeemed maximum number of time. The client shall re-issue a new one"])),a);return!1}return!0}g.isValidACSToken=a}),98);
__d("WAWebRedeemACSTokenFromStorage",["WAWebACSTokenUtils","WAWebCRUDOperationsACSTokens","WAWebModelStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebModelStorageUtils").getStorage().lock(["acs-tokens"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b[0];var c=(yield d("WAWebCRUDOperationsACSTokens").getACSTokensByProject(a,b));if(c.length===0)return null;c=c.filter(function(b){return d("WAWebACSTokenUtils").isValidACSToken({creationTs:b.creationTs,projectName:a,redeemCount:b.redeemCount})});if(c.length===0){yield d("WAWebCRUDOperationsACSTokens").deleteAllACSTokensByProject(a,b);return null}c=i(c);if(c==null)return null;var e=c.redeemCount+1;yield d("WAWebCRUDOperationsACSTokens").upsertACSToken(babelHelpers["extends"]({},c,{redeemCount:e}),b);return c.token});return function(a){return c.apply(this,arguments)}}())});return h.apply(this,arguments)}function i(a){var b=Math.min.apply(Math,a.map(function(a){return a.redeemCount}));return a.find(function(a){return a.redeemCount===b})}g.redeemACSTokenFromStorage=a}),98);
__d("WAWebRedeemACSToken",["Promise","WAACSTokenUtils","WATimeUtils","WAWamPrivateStatsToken","WAWebCRUDOperationsACSTokens","WAWebFetchACSTokens","WAWebRedeemACSTokenFromStorage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=5;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.projectName;var b=(yield d("WAWebRedeemACSTokenFromStorage").redeemACSTokenFromStorage(a));if(b!=null)return b;b=(yield k(a));if(b.length===0)return;var c=b[0];b=b.slice(1);var e=c.sharedSecret,f=c.token;c=c.t;yield d("WAWebCRUDOperationsACSTokens").storeACSTokenForProject(a,{creationTs:c,redeemCount:1,token:{sharedSecret:e,token:f}});yield d("WAWebCRUDOperationsACSTokens").storeACSTokensForProject(a,b.map(function(c){var a=c.sharedSecret,b=c.token;c=c.t;return{token:{sharedSecret:a,token:b},creationTs:c,redeemCount:0}}));return{sharedSecret:e,token:f}});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c===void 0&&(c=i);c=Array.from({length:c}).fill().map(function(){return m(a)});c=(yield (h||(h=b("Promise"))).allSettled(c));return c.filter(function(a){return a.status==="fulfilled"}).map(function(a){return a.value}).filter(Boolean)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAACSTokenUtils").getBlindedToken(),c=b.token,e=b.blindedToken;b=b.blindingFactor;a=(yield d("WAWebFetchACSTokens").fetchACSTokenForProjectWithRetry(a,e));if(a.result==null)return;e=a.result;a=e.signCredentialAcsPublicKeyElementValue;var f=e.signCredentialSignedCredentialElementValue;e=e.signCredentialT;f=d("WAWamPrivateStatsToken").unblindToken(f,b,a);if(f==null)return;b=d("WAACSTokenUtils").getSharedSecret({token:c,unblindedSignedToken:f});return{token:c,sharedSecret:b,t:d("WATimeUtils").castToUnixTime(e)}});return n.apply(this,arguments)}g.redeemACSToken=a}),98);
__d("WAWebRedeemACSCredential",["WABase64","WACryptoHmac","WAWebRedeemACSToken","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=new ArrayBuffer(0));a=(yield d("WAWebRedeemACSToken").redeemACSToken({projectName:a}));if(a==null)return;var c=d("WABase64").encodeB64UrlSafe(a.token,!0);a=(yield d("WACryptoHmac").hmacSha256(a.sharedSecret,b));b=d("WABase64").encodeB64UrlSafe(a,!0);a=c+"+"+b;return a});return h.apply(this,arguments)}g.redeemACSCredential=a}),98);
__d("WAWebACSNetwork",["WAWebHttpExtendedFetch","WAWebRedeemACSCredential","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.url,c=a.project;a=a.data;c=(yield i(c,a));return d("WAWebHttpExtendedFetch").extendedFetch(b,{body:c,method:"POST"})});return h.apply(this,arguments)}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("WAWebRedeemACSCredential").redeemACSCredential(a));if(e==null)throw c("err")("Failed to redeem ACS credential");b.set("acs_token",e);b.set("acs_project",a);return b});return j.apply(this,arguments)}g.fetchWithACSCredential=a;g.addACSCredential=i}),98);
__d("WAWebCRUDOperationsMediaPlaybackEvent",["WAWebSchemaMediaPlaybackEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WAWebSchemaMediaPlaybackEvent").getMediaPlaybackEventTable().bulkCreateOrReplace(a.map(function(a){return{event:a}}))}function c(a){return d("WAWebSchemaMediaPlaybackEvent").getMediaPlaybackEventTable().all({limit:a,offset:0})}function e(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebSchemaMediaPlaybackEvent").getMediaPlaybackEventTable().count()});return h.apply(this,arguments)}function f(a){return d("WAWebSchemaMediaPlaybackEvent").getMediaPlaybackEventTable().bulkRemove(a)}g.addEvents=a;g.getOldestEvents=c;g.getRowCount=e;g.deleteEvents=f}),98);
__d("WAWebMediaPlaybackEventLoggerCache",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=[]}var b=a.prototype;b.write=function(a){if(Array.isArray(a)){var b;(b=this.$1).push.apply(b,a);return}this.$1.push(a)};b.consume=function(){var a=this.$1;this.$1=[];return a};return a}();f.MediaPlaybackEventLoggerCache=a}),66);
__d("WAWebMediaPlaybackEventPersistentQueue",["WALogger","WAWebCRUDOperationsMediaPlaybackEvent","WAWebPromiseQueue","lodash"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(d("WAWebPromiseQueue").PromiseQueue)();a=200;b=c("lodash").throttle(function(a){return k(a)},a);function k(a){return j.enqueue(function(){var b=a.consume();if(b.length===0)return;return d("WAWebCRUDOperationsMediaPlaybackEvent").addEvents(b).then(function(){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventPersistentQueue] write success"]))).devConsole(b)})["catch"](function(c){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventPersistentQueue] write failed"]))).devConsole(c).sendLogs("media-playback-event-persistent-queue-write-failed"),a.write(b)})})}g.writePromiseQueue=j;g.WRITE_THROTTLE_INTERVAL=a;g.addToQueue=b}),98);
__d("WAWebFetchOHAIKeyConfigJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"aead_id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"expiration_date",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"kdf_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"kem_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"key_id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"last_updated_time",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"public_key",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"WAWebFetchOHAIKeyConfigJobQuery",selections:[{alias:null,args:null,concreteType:"XWA2OHAIConfigsResponse",kind:"LinkedField",name:"xwa2_ohai_configurations",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2OHAIConfig",kind:"LinkedField",name:"ohai_configs",plural:!0,selections:[{kind:"RequiredField",field:a,action:"THROW"},{kind:"RequiredField",field:b,action:"THROW"},{kind:"RequiredField",field:c,action:"THROW"},{kind:"RequiredField",field:d,action:"THROW"},{kind:"RequiredField",field:e,action:"THROW"},{kind:"RequiredField",field:f,action:"THROW"},{kind:"RequiredField",field:g,action:"THROW"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"WAWebFetchOHAIKeyConfigJobQuery",selections:[{alias:null,args:null,concreteType:"XWA2OHAIConfigsResponse",kind:"LinkedField",name:"xwa2_ohai_configurations",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2OHAIConfig",kind:"LinkedField",name:"ohai_configs",plural:!0,selections:[a,b,c,d,e,f,g],storageKey:null}],storageKey:null}]},params:{id:"29366514836329275",metadata:{},name:"WAWebFetchOHAIKeyConfigJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebFetchOHAIKeyConfigJob",["WATimeUtils","WAWebFetchOHAIKeyConfigJobQuery.graphql","WAWebMexClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("WAWebFetchOHAIKeyConfigJobQuery.graphql");function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebMexClient").fetchQuery(i,{}));a=(a=a.xwa2_ohai_configurations)==null?void 0:a.ohai_configs;return a==null?null:a.reduce(function(a,b){var c=b.expiration_date,e=b.last_updated_time;c=Number.parseInt(c,10);e=Number.parseInt(e,10);if(!Number.isSafeInteger(c)||!Number.isSafeInteger(e))return a;return a!=null&&a.expirationDate>c?a:{aeadId:b.aead_id,expirationDate:d("WATimeUtils").castToUnixTime(c),kdfId:b.kdf_id,kemId:b.kem_id,keyId:b.key_id,lastUpdatedTime:d("WATimeUtils").castToUnixTime(e),publicKey:b.public_key}},null)});return j.apply(this,arguments)}g.mexFetchOHAIKeyConfig=a}),98);
__d("WAWebOHAIUserPrefs",["WATimeUtils","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").UserPrefs.OHAIKeyConfig,a)}function b(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").UserPrefs.OHAIKeyConfig);if(a==null||typeof a!=="object")return null;var b=a.aeadId,e=a.kdfId,f=a.kemId,g=a.expirationDate,h=a.keyId,i=a.lastUpdatedTime;a=a.publicKey;return typeof g!=="number"||typeof b!=="number"||typeof e!=="number"||typeof f!=="number"||typeof h!=="number"||typeof i!=="number"||typeof a!=="string"?null:{aeadId:b,kdfId:e,kemId:f,keyId:h,publicKey:a,expirationDate:d("WATimeUtils").castToUnixTime(g),lastUpdatedTime:d("WATimeUtils").castToUnixTime(i)}}g.setOHAIKeyConfig=a;g.getOHAIKeyConfig=b}),98);
__d("WAWebOHAIKeyConfigProvider",["Hpke","WAHex","WALogger","WATimeUtils","WAWebFetchOHAIKeyConfigJob","WAWebNewsletterRpcUtils","WAWebOHAIUserPrefs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=60*60;function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield m());if(a==null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[OHAI] Failed to retrieve OHAI key"]))).sendLogs("ohai-retrieve-failed");return null}var b=d("Hpke").AeadID.cast(a.aeadId),c=d("Hpke").KdfID.cast(a.kdfId),e=d("Hpke").KemID.cast(a.kemId),f=a.keyId;if(b==null||c==null||e==null||f==null){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[OHAI] Failed to cast OHAI parameters"]))).sendLogs("ohai-cast-failed");return null}try{return{aeadId:b,kdfId:c,kemId:e,keyId:f,expirationDate:a.expirationDate,publicKey:new Uint8Array(d("WAHex").parseHex(a.publicKey))}}catch(a){d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[OHAI] Failed to parse OHAI key config"]))).devConsole(a).sendLogs("ohai-parse-failed");return null}});return l.apply(this,arguments)}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebOHAIUserPrefs").getOHAIKeyConfig();if(a!=null&&o(a))return a;a=(yield d("WAWebNewsletterRpcUtils").runWithBackoff(function(){return d("WAWebFetchOHAIKeyConfigJob").mexFetchOHAIKeyConfig()}));a!=null&&d("WAWebOHAIUserPrefs").setOHAIKeyConfig(a);return a});return n.apply(this,arguments)}function o(a){return a.expirationDate-k>d("WATimeUtils").unixTime()}g.provideOHAIKeyConfig=a}),98);
__d("WAWebOHAIClient",["OhaiClient","WALogger","WAWebABProps","WAWebACSNetwork","WAWebHttpExtendedFetch","WAWebOHAIKeyConfigProvider","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set(["https://meta-ohttp-relay-prod.fastly-edge.com/"]);function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.url,e=a.project;a=a.payload;var f=(yield d("WAWebOHAIKeyConfigProvider").provideOHAIKeyConfig());if(f==null){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["No OHAI key config available"]))).sendLogs("failed-to-fetch-ohai-key").tags("ohai");throw c("err")("No OHAI key config available")}e=(yield l({project:e,url:b,payload:a}));b=(yield d("OhaiClient").encapsulateRequest(f,e,!0));a=b.ctx;f=b.enc;e=b.encapsulatedRequest;b=n();b=(yield d("WAWebHttpExtendedFetch").extendedFetch(b,{body:e,headers:{"Content-Type":"message/ohttp-req"},method:"POST"}));if(!b.ok)return b;e=(yield b.arrayBuffer());b=new Uint8Array(e);return d("OhaiClient").decapsulateResponse(a,f,b)});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.url,c=a.project;a=a.payload;if(a==null||c==null)return new Request(b);c=(yield d("WAWebACSNetwork").addACSCredential(c,a));return new Request(b,{body:c,method:"POST"})});return m.apply(this,arguments)}function n(){var a=d("WAWebABProps").getABPropConfigValue("music_ohai_proxy_url");a=new URL(a);o(a);return a}function o(a){if(!j.has(a.href)){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Invalid OHAI proxy URL: ",""])),a.href).sendLogs("ohai-invalid-proxy-"+a.href).tags("ohai");throw c("err")("Invalid OHAI proxy URL")}}g.fetchOHAI=a}),98);
__d("WAWebSNAPLUploadMusicConsumptionLogs",["WALogger","WAWebACSTokenConfig","WAWebBuildConstants","WAWebFileUtils","WAWebMobilePlatforms","WAWebNetworkStatus","WAWebOHAIClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new URL("https://acs.whatsapp.com/music/reporting"),j=656096963291760..toString(),k=167028690535322..toString();function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("WAWebNetworkStatus").waitIfOffline();a=m(a);a=(yield d("WAWebOHAIClient").fetchOHAI({url:i,project:d("WAWebACSTokenConfig").ACS_PROJECTS.WA_StatusMusicReporting,payload:a}));d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[SNAPL] logs uploaded via OHAI"]))).devConsole(a);return a});return l.apply(this,arguments)}function m(a){var b=new FormData(),c=d("WAWebMobilePlatforms").isSMB()?j:k;b.append("app_id",c);b.append("app_version",d("WAWebBuildConstants").VERSION_STR);b.append("events",d("WAWebFileUtils").createFile([n(a)],"snapl.txt"));return b}function n(a){return a.map(function(a){return JSON.stringify(a)}).join("\n")}g.uploadMusicConsumptionLogs=a}),98);
__d("WAWebMediaPlaybackEventUploader",["WAExponentialBackoff","WALogger","WAWebABProps","WAWebCRUDOperationsMediaPlaybackEvent","WAWebNetworkStatus","WAWebPromiseQueue","WAWebSNAPLUploadMusicConsumptionLogs","asyncToGeneratorRuntime","err","lodash"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=100;e=3e3;var m=new(d("WAWebPromiseQueue").PromiseQueue)(),n=c("lodash").throttle(a,e);function a(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield m.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebCRUDOperationsMediaPlaybackEvent").getRowCount());if(a===0)return{success:!0,leftover:0};var b=(yield s()),e=b.events;b=b.ids;var f=e.length;if(f===0)return{success:!0,leftover:0};try{e=(yield p(e));if(!e.ok)throw c("err")("upload failed")}catch(b){d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventUploader] failed to upload events"]))).devConsole(b);return{success:!1,leftover:a}}yield d("WAWebCRUDOperationsMediaPlaybackEvent").deleteEvents(b);return a>f?{success:!0,leftover:a-f}:{success:!0,leftover:0}}))),e=a.success;a=a.leftover;if(e&&a>0)return n()});return o.apply(this,arguments)}function p(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventUploader] starting upload"]))).devConsole(a);var e=new AbortController();e=e.signal;return d("WAExponentialBackoff").exponentialBackoff({retries:3,signal:e,minTimeout:1e3},function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventUploader.upload] attempt # ",""])),e+1);yield c("WAWebNetworkStatus").waitIfOffline();e=(yield d("WAWebSNAPLUploadMusicConsumptionLogs").uploadMusicConsumptionLogs(a));if(e==null)throw c("err")("upload failed");if(e.ok){d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventUploader.upload] success"])));return e}if(q(e))return b(c("err")("upload failed with status code: "+e.status));throw c("err")("upload failed")});return function(a,b){return e.apply(this,arguments)}}())}function q(a){return a.status>=500}function r(){return Math.max(d("WAWebABProps").getABPropConfigValue("ohai_request_kb_size")-1,1)*1e3}function s(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=0,b=(yield d("WAWebCRUDOperationsMediaPlaybackEvent").getOldestEvents(l)),c=new TextEncoder();return b.reduce(function(b,d){var e=c.encode(JSON.stringify(d.event)).length;if(a+e>r())return b;a+=e;b.events.push(d.event);b.ids.push(d.id);return b},{events:[],ids:[]})});return t.apply(this,arguments)}g.MAX_BATCH_SIZE=l;g.UPLOAD_THROTTLE_INTERVAL=e;g.uploadQueue=m;g.requestUpload=n}),98);
__d("WAWebMediaPlaybackEventLogger",["WALogger","WAWebMediaPlaybackEventLoggerCache","WAWebMediaPlaybackEventPersistentQueue","WAWebMediaPlaybackEventUploader"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a){this.$1=a}var b=a.prototype;b.log=function(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventLogger][","] log"])),a.required_metadata.media_id).devConsole(a),this.$1.write(a),this.$2()};b.$2=function(){d("WAWebMediaPlaybackEventPersistentQueue").addToQueue(this.$1).then(d("WAWebMediaPlaybackEventUploader").requestUpload)["catch"](function(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[MediaPlaybackEventLogger] Failed to flush logs"]))).devConsole(a).sendLogs("media-playback-event-logger-flush-failed")})};return a}();b=new a(new(d("WAWebMediaPlaybackEventLoggerCache").MediaPlaybackEventLoggerCache)());g.MediaPlaybackEventLoggerImpl=a;g.MediaPlaybackEventLogger=b}),98);
__d("WAWebPsChannelsSnaplEventWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({PsChannelsSnaplEvent:[6254,{appId:[2,d("WAWebWamCodegenUtils").TYPES.INTEGER],videoEventJson:[1,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"private",0]},{PsChannelsSnaplEvent:[]});g.PsChannelsSnaplEventWamEvent=a}),98);
__d("WAWebMediaPlaybackLogFlusher",["WALogger","WAWebCrashlog","WAWebMediaPlaybackEventLogger","WAWebPsChannelsSnaplEventWamEvent","WAWebWamEnumMessageType","err"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.flushLogs=function(){var a=this.$1.consumeLoggerEvents();switch(this.$2){case d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:a.forEach(function(a){new(d("WAWebPsChannelsSnaplEventWamEvent").PsChannelsSnaplEventWamEvent)({appId:167028690535322,videoEventJson:JSON.stringify({events:a.events,required_metadata:a.required_metadata})}).commit()});break;case d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:a.forEach(function(a){d("WAWebMediaPlaybackEventLogger").MediaPlaybackEventLogger.log(a)});break;default:void d("WAWebCrashlog").upload({reason:"invalid video origin"});throw c("err")("Invalid video origin")}};b.discardLogsWithoutFlushing=function(){var a=this.$1.consumeLoggerEvents();a.forEach(function(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[mediaplaybacklogflusher][","] Discarding events"])),a.required_metadata.media_id).devConsole(a)})};return a}();g.WhatsAppMediaPlaybackLogFlusher=a}),98);
__d("WAWebCometVideoPlayerStateMachine",["MediaPlaybackCompoundEventStateMachineLogger","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","WALogger","WAWebMediaPlaybackLogFlusher","WAWebNoop"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.initialLoggingMetaData,e=a.initialCoreVideoPlayerMetaData,f=a.debugLogId,g=a.fullscreenControllerRef,j=a.videoEl,k=a.videoLiveTraceRef,l=a.videoPlayerPassiveViewabilityInfo,m=a.metadataProvider;a=a.videoOrigin;var n=d("MediaPlaybackCompoundEventStateMachineLogger").createMediaPlaybackCompoundEventStateMachineLogger({debugLogId:f,initialLoggingMetaData:b,initialCoreVideoPlayerMetaData:e,metadataProvider:m}),o=new(d("WAWebMediaPlaybackLogFlusher").WhatsAppMediaPlaybackLogFlusher)(n,a);e=[function(a,b,c){n.handleStateMachine(a,b,c);o.flushLogs();return!0}];m=d("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState({alwaysShowCaptions:!1,captionDisplayStyle:null,dimensions:b.dimensions,areCaptionsAutogenerated:!1,isAbrEnabled:!1,playerVersion:"comet_whatsapp_snapl_only",streamingFormat:"progressive",videoPlayerPassiveViewabilityInfo:l});var p=d("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithStateTransitionHandlers({collectUncontrolledState:i(j,k,g,l),stateTransitionHandlers:e,debugLogId:f,initialState:m,onFatalError:function(a){a=a instanceof Error?a.message:String(a);d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[mediaplayback][snapl] Fatal error in SNAPL machine"]))).sendLogs("snapl-fatal-error").devConsole(a)}});return{machine:p,callbacks:d("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine(p,c("WAWebNoop")),handleReactEffectInit:function(){var a=p.getCurrentState().controlledState.mountState;a==="before_mounted"&&p.dispatch({type:"implementation_mounted"})},handleReactEffectCleanup:function(){p.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"})}}}function i(a,b,c,e){return function(){return d("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:c,videoElementAPI:d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a),videoLiveTraceRef:b,videoPlayerPassiveViewabilityInfo:e})}}g.makeCometVideoPlayerStateMachine=a}),98);
__d("videoPlayerUniqueID",["guid"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return"id-vpuid-"+(a!=null?a:c("guid")())}g["default"]=a}),98);
__d("WAWebCometVideoPlayerUtils",["videoPlayerUniqueID"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a={height:a.clientHeight,width:a.clientWidth};return{accessToken:null,dimensions:a,productAttribution:null,downstreamShareSignalTracking:null,trackingNodes:"",trackingDataEncrypted:"",playerImplementationInstanceCountRef:{current:1},instanceKey:c("videoPlayerUniqueID")()}}g.getInitialMetadata=a}),98);
__d("WAWebMusicPlaybackUtils",["WAWebCountriesUtils","WAWebL10NCountryCodes","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=h();return c!=null&&b.has(c)&&!a.has(c)}function h(){var a=d("WAWebUserPrefsMeUser").getMaybeMePnUser();return a==null?null:d("WAWebCountriesUtils").asISOCountryCode(d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(a.user))}function b(){var a=h();if(a==null)return null;switch(a){case"AC":return"SH";default:a;return a}}g.canPlaybackMusic=a;g.getUserCountryCode=h;g.getUserCountryCodeForSNAPL=b}),98);
__d("WAWebSNAPLPersistentId",["WAWebPonyfillsCryptoRandomUUID"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("WAWebPonyfillsCryptoRandomUUID")()}function b(a){return a}g.computeSNAPLPersistentId=a;g.castToSNAPLPersistentId=b}),98);
__d("WAWebSNAPLUserPrefs",["WAWebSNAPLPersistentId","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWamEnumMessageType","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){switch(e){case d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").UserPrefs.SNAPLNewsLetterPersistentId,{persistentId:a,mediaId:b});break;case d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").UserPrefs.SNAPLPersistentId,{persistentId:a,mediaId:b});break;default:throw c("err")("Invalid video origin")}}function a(a,b){var e=null;switch(b){case d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:e=d("WAWebUserPrefsKeys").UserPrefs.SNAPLNewsLetterPersistentId;break;case d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:e=d("WAWebUserPrefsKeys").UserPrefs.SNAPLPersistentId;break;default:throw c("err")("Invalid video origin")}if(e==null)throw c("err")("Invalid video origin");e=c("WAWebUserPrefsStore").getUser(e);if(e==null||typeof e!=="object")return i(a,b);var f=e.persistentId;e=e.mediaId;return typeof f!=="string"||typeof e!=="string"?i(a,b):d("WAWebSNAPLPersistentId").castToSNAPLPersistentId(f)}function i(a,b){var c=d("WAWebSNAPLPersistentId").computeSNAPLPersistentId();h(c,a,b);return c}g.getSNAPLPersistentId=a}),98);
__d("useWAWebCometVideoPlayerStateMachine",["CoreVideoPlayerMetaData","WAWebCometVideoPlayerStateMachine","WAWebCometVideoPlayerUtils","WAWebMusicGatingUtils","WAWebMusicPlaybackUtils","WAWebNewsletterGatingUtils","WAWebNoop","WAWebSNAPLUserPrefs","WAWebWamEnumMessageType","WAWebWamMediaMetricUtils","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef,l=b.useState,m={current:null},n={current:null},o={getCurrent:function(){return null},subscribe:function(){return{remove:c("WAWebNoop")}}},p=function(){return{}},q={StatusViewer:"status_viewer",NewsletterViewer:"whatsapp_channels"},r=function(a){switch(a){case d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:return!d("WAWebMusicGatingUtils").isStatusMusicReceiverEnabled();case d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:return!d("WAWebNewsletterGatingUtils").isNewsletterVideoPlaybackLoggingEnabled();default:a;return!0}},s=function(a){switch(a){case d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:return q.StatusViewer;case d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:return q.NewsletterViewer;default:a;return""}},t=function(a){switch(a){case d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:return d("WAWebMusicGatingUtils").isStatusMusicReceiverEnabled();case d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:return d("WAWebNewsletterGatingUtils").isNewsletterVideoPlaybackLoggingEnabled();default:a;return!1}};function a(a){var b=a.mediaId,e=a.isCopyrightMuted,f=a.videoOrigin,g=a.mediaIdString,h=c("useWAWebUnmountSignal")(),q=k(null),u=k(e),v=k(null),w=k(null);a=l(function(){return r(f)});var x=a[0],y=a[1];a=l({handleReactEffectInit:c("WAWebNoop"),handleReactEffectCleanup:c("WAWebNoop"),callbacks:null});var z=a[0],A=a[1];a=i(function(a){var e=q.current;if(e===a)return;q.current=a;var i=q.current;if(i==null||b==null||!t(f)){A({handleReactEffectInit:c("WAWebNoop"),handleReactEffectCleanup:c("WAWebNoop"),callbacks:null});b==null&&y(!0);return}var j=d("WAWebSNAPLUserPrefs").getSNAPLPersistentId(b,f);e=d("WAWebCometVideoPlayerUtils").getInitialMetadata(i);a=d("CoreVideoPlayerMetaData").applyDefaultsToCoreVideoPlayerMetaData({loggingConfig:{loggingToSNAPLCreateMetadataProvider:null},subOrigin:"not_specified_please_fix",videoFBID:"0"});v.current=e;w.current=a;e=d("WAWebCometVideoPlayerStateMachine").makeCometVideoPlayerStateMachine({initialLoggingMetaData:e,initialCoreVideoPlayerMetaData:a,debugLogId:d("WAWebWamMediaMetricUtils").generateMediaEventId().toString(10),videoEl:i,fullscreenControllerRef:m,videoLiveTraceRef:n,videoPlayerPassiveViewabilityInfo:o,metadataProvider:{getErrorMetadata:p,getRequiredMetadata:function(){return{current_watching_module:s(f),media_id:b,tracking_type:"organic",persistent_id:j,media_id_string:g!=null?g:""}},getTagMetadata:function(){return{is_copyright_muted:u.current,country:d("WAWebMusicPlaybackUtils").getUserCountryCodeForSNAPL(),player_sound_on:!i.muted}}},videoOrigin:f});a=e.callbacks;var k=e.handleReactEffectInit,l=e.handleReactEffectCleanup;e=e.machine;if(h.aborted===!0)return;A({machine:e,handleReactEffectInit:k,handleReactEffectCleanup:l,callbacks:a});y(!0)},[b,h.aborted,f,g]);j(function(){u.current=e;var a=z.machine,b=v.current,c=w.current;if(a==null||b==null||c==null)return;a.dispatch({payload:{loggingMetaData:b,coreVideoPlayerMetaData:c},type:"notify_logging_metadata_change"})},[z.machine,e]);return{callbacks:z.callbacks,handleReactEffectInit:z.handleReactEffectInit,handleReactEffectCleanup:z.handleReactEffectCleanup,ready:x,videoElementRefCallback:a}}g["default"]=a}),98);